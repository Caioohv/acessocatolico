#!/bin/sh
# Git pre-commit hook

echo "ğŸ” Executando verificaÃ§Ãµes pre-commit..."

# Check for TypeScript errors
echo "ğŸ“ Verificando TypeScript..."
npx tsc --noEmit
if [ $? -ne 0 ]; then
  echo "âŒ Erro de TypeScript encontrado!"
  exit 1
fi

# Run ESLint
echo "ğŸ”§ Executando ESLint..."
npx eslint . --ext .js,.ts,.vue
if [ $? -ne 0 ]; then
  echo "âŒ Erro de ESLint encontrado!"
  exit 1
fi

# Run Prettier check
echo "ğŸ’… Verificando formataÃ§Ã£o com Prettier..."
npx prettier --check .
if [ $? -ne 0 ]; then
  echo "âŒ Arquivos nÃ£o formatados encontrados! Execute 'npm run format' para corrigir."
  exit 1
fi

# Check Prisma schema
echo "ğŸ—ƒï¸ Verificando schema do Prisma..."
npx prisma validate
if [ $? -ne 0 ]; then
  echo "âŒ Erro no schema do Prisma!"
  exit 1
fi

echo "âœ… Todas as verificaÃ§Ãµes passaram!"

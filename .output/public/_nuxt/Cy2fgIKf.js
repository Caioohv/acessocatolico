import{F as s}from"./DOw91aXk.js";const L=()=>{const h=s([]),i=s(!1),c=s(null),r=s({page:1,limit:12,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),u=s([]),l=s([]),d=s([]),g=s([]),t=s({}),n=async(e=1,a)=>{try{i.value=!0,c.value=null,a!==void 0&&(t.value={...a});const o=new URLSearchParams({page:e.toString(),limit:r.value.limit.toString()});t.value.search&&o.append("search",t.value.search),t.value.stateId&&o.append("stateId",t.value.stateId),t.value.cityId&&o.append("cityId",t.value.cityId),t.value.neighborhoodId&&o.append("neighborhoodId",t.value.neighborhoodId),t.value.dioceseId&&o.append("dioceseId",t.value.dioceseId);const p=await $fetch(`/api/parishes?${o.toString()}`);h.value=p.parishes,r.value=p.pagination}catch(o){c.value=o.message||"Erro ao carregar paróquias",console.error("Error loading parishes:",o)}finally{i.value=!1}};return{parishes:h,loading:i,error:c,pagination:r,states:u,cities:l,neighborhoods:d,dioceses:g,filters:t,loadParishes:n,loadParish:async e=>{try{return i.value=!0,c.value=null,await $fetch(`/api/parishes/${e}`)}catch(a){throw c.value=a.message||"Erro ao carregar paróquia",console.error("Error loading parish:",a),a}finally{i.value=!1}},loadStates:async()=>{try{const{states:e}=await $fetch("/api/locations/states");u.value=e}catch(e){console.error("Error loading states:",e)}},loadCities:async e=>{try{const{cities:a}=await $fetch(`/api/locations/cities?stateId=${e}`);l.value=a}catch(a){console.error("Error loading cities:",a)}},loadNeighborhoods:async e=>{try{const{neighborhoods:a}=await $fetch(`/api/locations/neighborhoods?cityId=${e}`);d.value=a}catch(a){console.error("Error loading neighborhoods:",a)}},loadDioceses:async()=>{try{const{dioceses:e}=await $fetch("/api/locations/dioceses");g.value=e}catch(e){console.error("Error loading dioceses:",e)}},nextPage:()=>{r.value.hasNext&&n(r.value.page+1)},prevPage:()=>{r.value.hasPrev&&n(r.value.page-1)},goToPage:e=>{e>=1&&e<=r.value.totalPages&&n(e)},clearFilters:()=>{t.value={},l.value=[],d.value=[],n(1)},getMassSchedule:e=>{const a={};return e.forEach(o=>{a[o.dayOfWeek]||(a[o.dayOfWeek]=[]),a[o.dayOfWeek].push({time:o.time,type:o.type,description:o.description})}),a},getDayName:e=>["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"][e]||"",getMainPriest:e=>e.find(a=>a.isMain),getSocialContact:(e,a)=>e.find(o=>o.type===a)}};export{L as u};

import{j as S,e as M,t as B,g as $,_ as P}from"./BKhI9f09.js";import{h as E,D as c,a2 as T,e as A,U as F,aD as j,aE as O,G as R,a3 as D,j as h,o as y,O as b,c as N,B as L,F as U}from"./wPnuorX7.js";import{S as k}from"./BtdOvfXc.js";function K(t){const e=S({dir:E("ltr")});return c(()=>{var a;return(t==null?void 0:t.value)||((a=e.dir)==null?void 0:a.value)||"ltr"})}function _(){const t=E(),e=c(()=>{var a,r;return["#text","#comment"].includes((a=t.value)==null?void 0:a.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:M(t)});return{primitiveElement:t,currentElement:e}}function Y(t){return c(()=>{var e;return B(t)?!!((e=M(t))!=null&&e.closest("form")):!0})}const C="data-reka-collection-item";function G(t={}){const{key:e="",isProvider:a=!1}=t,r=`${e}CollectionProvider`;let n;if(a){const s=E(new Map);n={collectionRef:E(),itemMap:s},D(r,n)}else n=T(r);const o=(s=!1)=>{const u=n.collectionRef.value;if(!u)return[];const i=Array.from(u.querySelectorAll(`[${C}]`)),m=Array.from(n.itemMap.value.values()).sort((p,d)=>i.indexOf(p.ref)-i.indexOf(d.ref));return s?m:m.filter(p=>p.ref.dataset.disabled!=="")},l=A({name:"CollectionSlot",setup(s,{slots:u}){const{primitiveElement:i,currentElement:v}=_();return R(v,()=>{n.collectionRef.value=v.value}),()=>O(k,{ref:i},u)}}),f=A({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(s,{slots:u,attrs:i}){const{primitiveElement:v,currentElement:m}=_();return F(p=>{if(m.value){const d=j(m.value);n.itemMap.value.set(d,{ref:m.value,value:s.value}),p(()=>n.itemMap.value.delete(d))}}),()=>O(k,{...i,[C]:"",ref:v},u)}}),w=c(()=>Array.from(n.itemMap.value.values())),g=c(()=>n.itemMap.value.size);return{getItems:o,reactiveItems:w,itemMapSize:g,CollectionSlot:l,CollectionItem:f}}const J="rovingFocusGroup.onEntryFocus",Q={bubbles:!1,cancelable:!0},V={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function q(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function W(t,e,a){const r=q(t.key,a);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return V[r]}function X(t,e=!1){const a=$();for(const r of t)if(r===a||(r.focus({preventScroll:e}),$()!==a))return}function Z(t,e){return t.map((a,r)=>t[(e+r)%t.length])}const I=A({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:a,currentElement:r}=_(),n=c(()=>e.checked??e.value);return R(n,(o,l)=>{if(!r.value)return;const f=r.value,w=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(w,"value").set;if(s&&o!==l){const u=new Event("input",{bubbles:!0}),i=new Event("change",{bubbles:!0});s.call(f,o),f.dispatchEvent(u),f.dispatchEvent(i)}}),(o,l)=>(y(),h(P,b({ref_key:"primitiveElement",ref:a},{...e,...o.$attrs},{as:"input"}),null,16))}}),ee=A({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,a=c(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=c(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((n,o)=>typeof n=="object"?Object.entries(n).map(([l,f])=>({name:`[${e.name}][${o}][${l}]`,value:f})):{name:`[${e.name}][${o}]`,value:n}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([n,o])=>({name:`[${e.name}][${n}]`,value:o})):[]);return(n,o)=>a.value?(y(),h(I,b({key:n.name},{...e,...n.$attrs},{name:n.name,value:n.value}),null,16,["name","value"])):(y(!0),N(U,{key:1},L(r.value,l=>(y(),h(I,b({key:l.name,ref_for:!0},{...e,...n.$attrs},{name:l.name,value:l.value}),null,16,["name","value"]))),128))}});export{J as E,ee as _,G as a,Y as b,Q as c,_ as d,X as f,W as g,K as u,Z as w};

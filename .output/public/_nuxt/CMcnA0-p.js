import{d as R,t as O,g as $,_ as S}from"./DoM2d5B8.js";import{h as w,D as f,a0 as P,e as A,M as D,aC as T,aD as M,G as C,a1 as j,j as h,o as y,O as _,c as F,B as L,F as N}from"./DwCNKQGy.js";import{S as k}from"./DWLJyer9.js";function g(){const t=w(),e=f(()=>{var a,n;return["#text","#comment"].includes((a=t.value)==null?void 0:a.$el.nodeName)?(n=t.value)==null?void 0:n.$el.nextElementSibling:R(t)});return{primitiveElement:t,currentElement:e}}function z(t){return f(()=>{var e;return O(t)?!!((e=R(t))!=null&&e.closest("form")):!0})}const B="data-reka-collection-item";function K(t={}){const{key:e="",isProvider:a=!1}=t,n=`${e}CollectionProvider`;let r;if(a){const s=w(new Map);r={collectionRef:w(),itemMap:s},j(n,r)}else r=P(n);const o=(s=!1)=>{const u=r.collectionRef.value;if(!u)return[];const i=Array.from(u.querySelectorAll(`[${B}]`)),m=Array.from(r.itemMap.value.values()).sort((v,d)=>i.indexOf(v.ref)-i.indexOf(d.ref));return s?m:m.filter(v=>v.ref.dataset.disabled!=="")},l=A({name:"CollectionSlot",setup(s,{slots:u}){const{primitiveElement:i,currentElement:p}=g();return C(p,()=>{r.collectionRef.value=p.value}),()=>M(k,{ref:i},u)}}),c=A({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(s,{slots:u,attrs:i}){const{primitiveElement:p,currentElement:m}=g();return D(v=>{if(m.value){const d=T(m.value);r.itemMap.value.set(d,{ref:m.value,value:s.value}),v(()=>r.itemMap.value.delete(d))}}),()=>M(k,{...i,[B]:"",ref:p},u)}}),E=f(()=>Array.from(r.itemMap.value.values())),b=f(()=>r.itemMap.value.size);return{getItems:o,reactiveItems:E,itemMapSize:b,CollectionSlot:l,CollectionItem:c}}const U={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function V(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Y(t,e,a){const n=V(t.key,a);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return U[n]}function G(t,e=!1){const a=$();for(const n of t)if(n===a||(n.focus({preventScroll:e}),$()!==a))return}function J(t,e){return t.map((a,n)=>t[(e+n)%t.length])}const I=A({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:a,currentElement:n}=g(),r=f(()=>e.checked??e.value);return C(r,(o,l)=>{if(!n.value)return;const c=n.value,E=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(E,"value").set;if(s&&o!==l){const u=new Event("input",{bubbles:!0}),i=new Event("change",{bubbles:!0});s.call(c,o),c.dispatchEvent(u),c.dispatchEvent(i)}}),(o,l)=>(y(),h(S,_({ref_key:"primitiveElement",ref:a},{...e,...o.$attrs},{as:"input"}),null,16))}}),Q=A({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,a=f(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),n=f(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((r,o)=>typeof r=="object"?Object.entries(r).map(([l,c])=>({name:`[${e.name}][${o}][${l}]`,value:c})):{name:`[${e.name}][${o}]`,value:r}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([r,o])=>({name:`[${e.name}][${r}]`,value:o})):[]);return(r,o)=>a.value?(y(),h(I,_({key:r.name},{...e,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(y(!0),F(N,{key:1},L(n.value,l=>(y(),h(I,_({key:l.name,ref_for:!0},{...e,...r.$attrs},{name:l.name,value:l.value}),null,16,["name","value"]))),128))}});export{Q as _,z as a,g as b,G as f,Y as g,K as u,J as w};

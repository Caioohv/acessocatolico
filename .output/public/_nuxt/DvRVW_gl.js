import E from"./Dx8xx7ye.js";import{g as L,r as G,k as O,e as b,c as l,a as s,A as m,b as p,d as v,x as e,R as B,S as as,bN as N,F as T,q,l as M,C as os,o as i,t as c,Q as R,_ as is,w as ns,K as A,a6 as rs,s as ls}from"./DXWSERTp.js";import{_ as ds}from"./p721tLH_.js";import{u as cs}from"./DOzNpd7K.js";const _s={class:"parish-filters"},us={class:"parish-filters__header"},ps={class:"parish-filters__title"},hs={class:"filter-group"},ms={for:"search",class:"filter-label"},gs={class:"filter-group"},vs={for:"state",class:"filter-label"},bs=["value"],fs={key:0,class:"filter-group"},ys={for:"city",class:"filter-label"},$s=["disabled"],ks=["value"],Ps={key:1,class:"filter-group"},Cs={for:"neighborhood",class:"filter-label"},Is=["value"],ws={class:"filter-group"},Fs={for:"diocese",class:"filter-label"},Ts=["value"],qs={class:"parish-filters__actions"},Ss=["disabled"],Ds=L({__name:"ParishFilters",props:{filters:{},states:{},cities:{},neighborhoods:{},dioceses:{},loading:{type:Boolean,default:!1}},emits:["apply-filters","clear-filters","state-change","city-change"],setup(S,{emit:d}){const $=S,k=d,n=G({...$.filters});O(()=>$.filters,h=>{n.value={...h}},{deep:!0});const P=b(()=>!!(n.value.search||n.value.stateId||n.value.cityId||n.value.neighborhoodId||n.value.dioceseId)),C=()=>{const h=Object.fromEntries(Object.entries(n.value).filter(([t,f])=>f!==""&&f!==void 0));k("apply-filters",h)},w=()=>{n.value={},k("clear-filters")},a=()=>{n.value.cityId="",n.value.neighborhoodId="",n.value.stateId&&k("state-change",n.value.stateId)},o=()=>{n.value.neighborhoodId="",n.value.cityId&&k("city-change",n.value.cityId)},_=G();return O(()=>n.value.search,()=>{_.value&&clearTimeout(_.value),_.value=setTimeout(()=>{C()},500)}),(h,t)=>{const f=E,V=R("LoadingSpinner");return i(),l("div",_s,[s("div",us,[s("h3",ps,[p(f,{name:"heroicons:funnel",class:"title__icon"}),t[5]||(t[5]=v(" Filtrar Paróquias "))]),e(P)?(i(),l("button",{key:0,onClick:w,class:"parish-filters__clear",type:"button"},[p(f,{name:"heroicons:x-mark",class:"clear__icon"}),t[6]||(t[6]=v(" Limpar Filtros "))])):m("",!0)]),s("form",{onSubmit:os(C,["prevent"]),class:"parish-filters__form"},[s("div",hs,[s("label",ms,[p(f,{name:"heroicons:magnifying-glass",class:"label__icon"}),t[7]||(t[7]=v(" Buscar "))]),B(s("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=u=>e(n).search=u),type:"text",placeholder:"Nome da paróquia, endereço...",class:"filter-input"},null,512),[[as,e(n).search]])]),s("div",gs,[s("label",vs,[p(f,{name:"heroicons:map",class:"label__icon"}),t[8]||(t[8]=v(" Estado "))]),B(s("select",{id:"state","onUpdate:modelValue":t[1]||(t[1]=u=>e(n).stateId=u),onChange:a,class:"filter-select"},[t[9]||(t[9]=s("option",{value:""},"Todos os estados",-1)),(i(!0),l(T,null,q(h.states,u=>{var y;return i(),l("option",{key:u.id,value:u.id},c(u.name)+" ("+c(((y=u._count)==null?void 0:y.parishes)||0)+") ",9,bs)}),128))],544),[[N,e(n).stateId]])]),e(n).stateId?(i(),l("div",fs,[s("label",ys,[p(f,{name:"heroicons:building-office-2",class:"label__icon"}),t[10]||(t[10]=v(" Cidade "))]),B(s("select",{id:"city","onUpdate:modelValue":t[2]||(t[2]=u=>e(n).cityId=u),onChange:o,class:"filter-select",disabled:h.cities.length===0},[t[11]||(t[11]=s("option",{value:""},"Todas as cidades",-1)),(i(!0),l(T,null,q(h.cities,u=>{var y;return i(),l("option",{key:u.id,value:u.id},c(u.name)+" ("+c(((y=u._count)==null?void 0:y.parishes)||0)+") ",9,ks)}),128))],40,$s),[[N,e(n).cityId]])])):m("",!0),e(n).cityId&&h.neighborhoods.length>0?(i(),l("div",Ps,[s("label",Cs,[p(f,{name:"heroicons:map-pin",class:"label__icon"}),t[12]||(t[12]=v(" Bairro "))]),B(s("select",{id:"neighborhood","onUpdate:modelValue":t[3]||(t[3]=u=>e(n).neighborhoodId=u),class:"filter-select"},[t[13]||(t[13]=s("option",{value:""},"Todos os bairros",-1)),(i(!0),l(T,null,q(h.neighborhoods,u=>{var y;return i(),l("option",{key:u.id,value:u.id},c(u.name)+" ("+c(((y=u._count)==null?void 0:y.parishes)||0)+") ",9,Is)}),128))],512),[[N,e(n).neighborhoodId]])])):m("",!0),s("div",ws,[s("label",Fs,[p(f,{name:"heroicons:building-library",class:"label__icon"}),t[14]||(t[14]=v(" Diocese "))]),B(s("select",{id:"diocese","onUpdate:modelValue":t[4]||(t[4]=u=>e(n).dioceseId=u),class:"filter-select"},[t[15]||(t[15]=s("option",{value:""},"Todas as dioceses",-1)),(i(!0),l(T,null,q(h.dioceses,u=>{var y;return i(),l("option",{key:u.id,value:u.id},c(u.name)+" ("+c(((y=u._count)==null?void 0:y.parishes)||0)+") ",9,Ts)}),128))],512),[[N,e(n).dioceseId]])]),s("div",qs,[s("button",{type:"submit",class:"filter-button filter-button--primary",disabled:h.loading},[h.loading?(i(),M(V,{key:0,class:"button__spinner"})):(i(),M(f,{key:1,name:"heroicons:magnifying-glass",class:"button__icon"})),t[16]||(t[16]=v(" Filtrar "))],8,Ss)])],32)])}}}),Bs=is(Ds,[["__scopeId","data-v-a8bc4605"]]),Ns={class:"parish-card"},Ms={class:"parish-card__header"},Es={class:"parish-card__image"},Ls={class:"parish-card__badge"},Vs={class:"parish-card__diocese"},As={class:"parish-card__content"},Us={class:"parish-card__name"},Ws={class:"parish-card__location"},js={class:"parish-card__location-text"},xs={key:0},zs={key:0,class:"parish-card__description"},Gs={class:"parish-card__stats"},Os={class:"stat"},Rs={class:"stat__value"},Qs={class:"stat"},Ys={class:"stat__value"},Hs={key:1,class:"parish-card__priest"},Js={class:"priest__name"},Xs={class:"parish-card__contact"},Zs={key:0,class:"contact-item"},Ks={class:"contact-item__text"},se={key:1,class:"contact-item"},ee={class:"contact-item__text"},te={class:"parish-card__social"},ae=["href","title"],oe={class:"parish-card__footer"},ie=L({__name:"ParishCard",props:{parish:{}},setup(S){const d=S,$=b(()=>d.parish.priests.find(a=>a.isMain)),k=b(()=>d.parish.contacts.filter(a=>["facebook","instagram","whatsapp","youtube","twitter"].includes(a.type))),n=(a,o)=>a.length<=o?a:a.substring(0,o)+"...",P=a=>{switch(a.type){case"facebook":return a.value.startsWith("http")?a.value:`https://facebook.com/${a.value}`;case"instagram":return a.value.startsWith("http")?a.value:`https://instagram.com/${a.value.replace("@","")}`;case"whatsapp":return`https://wa.me/${a.value.replace(/\D/g,"")}`;case"youtube":return a.value.startsWith("http")?a.value:`https://youtube.com/@${a.value}`;case"twitter":return a.value.startsWith("http")?a.value:`https://twitter.com/${a.value.replace("@","")}`;default:return a.value}},C=a=>({facebook:"simple-icons:facebook",instagram:"simple-icons:instagram",whatsapp:"simple-icons:whatsapp",youtube:"simple-icons:youtube",twitter:"simple-icons:twitter"})[a]||"heroicons:link",w=a=>({facebook:"Facebook",instagram:"Instagram",whatsapp:"WhatsApp",youtube:"YouTube",twitter:"Twitter"})[a]||"Link";return(a,o)=>{const _=E,h=ds;return i(),l("div",Ns,[s("div",Ms,[s("div",Es,[p(_,{name:"heroicons:building-library",class:"parish-card__icon"})]),s("div",Ls,[s("span",Vs,c(a.parish.diocese.name),1)])]),s("div",As,[s("h3",Us,c(a.parish.name),1),s("div",Ws,[p(_,{name:"heroicons:map-pin",class:"parish-card__location-icon"}),s("span",js,[v(c(a.parish.city.name)+", "+c(a.parish.state.code)+" ",1),a.parish.neighborhood?(i(),l("span",xs," - "+c(a.parish.neighborhood.name),1)):m("",!0)])]),a.parish.description?(i(),l("p",zs,c(n(a.parish.description,120)),1)):m("",!0),s("div",Gs,[s("div",Os,[p(_,{name:"heroicons:calendar-days",class:"stat__icon"}),s("span",Rs,c(a.parish._count.events),1),o[0]||(o[0]=s("span",{class:"stat__label"},"Eventos",-1))]),s("div",Qs,[p(_,{name:"heroicons:user-group",class:"stat__icon"}),s("span",Ys,c(a.parish._count.ministries),1),o[1]||(o[1]=s("span",{class:"stat__label"},"Ministérios",-1))])]),e($)?(i(),l("div",Hs,[p(_,{name:"heroicons:user",class:"priest__icon"}),s("span",Js,c(e($).user.profile.firstName)+" "+c(e($).user.profile.lastName),1),o[2]||(o[2]=s("span",{class:"priest__role"},"Pároco",-1))])):m("",!0),s("div",Xs,[a.parish.phone?(i(),l("div",Zs,[p(_,{name:"heroicons:phone",class:"contact-item__icon"}),s("span",Ks,c(a.parish.phone),1)])):m("",!0),a.parish.email?(i(),l("div",se,[p(_,{name:"heroicons:envelope",class:"contact-item__icon"}),s("span",ee,c(a.parish.email),1)])):m("",!0)]),s("div",te,[(i(!0),l(T,null,q(e(k),t=>(i(),l("a",{key:t.id,href:P(t),target:"_blank",rel:"noopener noreferrer",class:"social-link",title:w(t.type)},[p(_,{name:C(t.type),class:"social-link__icon"},null,8,["name"])],8,ae))),128))])]),s("div",oe,[p(h,{to:`/paroquias/${a.parish.id}`,class:"parish-card__button"},{default:ns(()=>[o[3]||(o[3]=s("span",null,"Ver Detalhes",-1)),p(_,{name:"heroicons:arrow-right",class:"button__icon"})]),_:1,__:[3]},8,["to"])])])}}}),ne={key:0,class:"pagination"},re={class:"pagination__info"},le={class:"pagination__text"},de={class:"pagination__controls"},ce=["disabled"],_e={class:"pagination__numbers"},ue={key:1,class:"pagination__ellipsis"},pe=["onClick"],he={key:2,class:"pagination__ellipsis"},me=["disabled"],ge=L({__name:"ParishPagination",props:{currentPage:{},totalPages:{},total:{},limit:{},hasNext:{type:Boolean},hasPrev:{type:Boolean}},emits:["prev-page","next-page","go-to-page"],setup(S){const d=S,$=b(()=>(d.currentPage-1)*d.limit+1),k=b(()=>Math.min(d.currentPage*d.limit,d.total)),n=b(()=>{const _=[],h=[];for(let t=Math.max(2,d.currentPage-2);t<=Math.min(d.totalPages-1,d.currentPage+2);t++)_.push(t);if(d.currentPage-2>2)h.push(2,"...");else for(let t=2;t<Math.max(2,d.currentPage-2);t++)h.push(t);if(h.push(..._),d.currentPage+2<d.totalPages-1)h.push("...",d.totalPages-1);else for(let t=Math.min(d.totalPages-1,d.currentPage+2)+1;t<d.totalPages;t++)h.push(t);return _}),P=b(()=>d.totalPages>1&&(d.currentPage>3||d.totalPages<=5)),C=b(()=>d.totalPages>1&&(d.currentPage<d.totalPages-2||d.totalPages<=5)),w=b(()=>d.currentPage>4&&d.totalPages>7),a=b(()=>d.currentPage<d.totalPages-3&&d.totalPages>7);return(o,_)=>{const h=E;return o.totalPages>1?(i(),l("div",ne,[s("div",re,[s("span",le," Mostrando "+c(e($))+" - "+c(e(k))+" de "+c(o.total)+" paróquias ",1)]),s("div",de,[s("button",{onClick:_[0]||(_[0]=t=>o.$emit("prev-page")),disabled:!o.hasPrev,class:"pagination__button pagination__button--prev",type:"button"},[p(h,{name:"heroicons:chevron-left",class:"button__icon"}),_[4]||(_[4]=v(" Anterior "))],8,ce),s("div",_e,[e(P)?(i(),l("button",{key:0,onClick:_[1]||(_[1]=t=>o.$emit("go-to-page",1)),class:A(["pagination__number",{"pagination__number--active":o.currentPage===1}]),type:"button"}," 1 ",2)):m("",!0),e(w)?(i(),l("span",ue,"...")):m("",!0),(i(!0),l(T,null,q(e(n),t=>(i(),l("button",{key:t,onClick:f=>o.$emit("go-to-page",t),class:A(["pagination__number",{"pagination__number--active":o.currentPage===t}]),type:"button"},c(t),11,pe))),128)),e(a)?(i(),l("span",he,"...")):m("",!0),e(C)?(i(),l("button",{key:3,onClick:_[2]||(_[2]=t=>o.$emit("go-to-page",o.totalPages)),class:A(["pagination__number",{"pagination__number--active":o.currentPage===o.totalPages}]),type:"button"},c(o.totalPages),3)):m("",!0)]),s("button",{onClick:_[3]||(_[3]=t=>o.$emit("next-page")),disabled:!o.hasNext,class:"pagination__button pagination__button--next",type:"button"},[_[5]||(_[5]=v(" Próxima ")),p(h,{name:"heroicons:chevron-right",class:"button__icon"})],8,me)])])):m("",!0)}}}),ve={class:"parishes-header"},be={class:"header__content"},fe={class:"header__stats"},ye={class:"stat-card"},$e={class:"stat-card__value"},ke={class:"stat-card"},Pe={class:"stat-card__value"},Ce={class:"stat-card"},Ie={class:"stat-card__value"},we={class:"parishes-content"},Fe={class:"content__layout"},Te={class:"content__sidebar"},qe={class:"content__main"},Se={class:"results-header"},De={class:"results-header__info"},Be={class:"results-header__title"},Ne={key:0,class:"active-filters"},Me={class:"active-filters__list"},Ee={key:0,class:"filter-tag"},Le={key:1,class:"filter-tag"},Ve={key:2,class:"filter-tag"},Ae={key:3,class:"filter-tag"},Ue={key:4,class:"filter-tag"},We={key:0,class:"loading-state"},je={key:1,class:"error-state"},xe={class:"error-state__message"},ze={key:2,class:"empty-state"},Ge={key:3,class:"parishes-grid"},He=L({__name:"index",setup(S){rs({title:"Paróquias Católicas - AcessoCatólico",ogTitle:"Paróquias Católicas - AcessoCatólico",description:"Encontre paróquias católicas em todo o Brasil. Descubra horários de missa, eventos, ministérios e entre em contato com a comunidade local.",ogDescription:"Encontre paróquias católicas em todo o Brasil. Descubra horários de missa, eventos, ministérios e entre em contato com a comunidade local.",ogImage:"/og-parishes.jpg",twitterCard:"summary_large_image"});const{parishes:d,loading:$,error:k,pagination:n,states:P,cities:C,neighborhoods:w,dioceses:a,filters:o,loadParishes:_,loadStates:h,loadCities:t,loadNeighborhoods:f,loadDioceses:V,nextPage:u,prevPage:y,goToPage:Q,clearFilters:Y}=cs(),H=b(()=>!!(o.value.search||o.value.stateId||o.value.cityId||o.value.neighborhoodId||o.value.dioceseId)),U=b(()=>P.value.find(g=>g.id===o.value.stateId)),W=b(()=>C.value.find(g=>g.id===o.value.cityId)),j=b(()=>w.value.find(g=>g.id===o.value.neighborhoodId)),x=b(()=>a.value.find(g=>g.id===o.value.dioceseId)),J=g=>{_(1,g)},z=()=>{Y()},X=g=>{t(g)},Z=g=>{f(g)},D=g=>{const r={...o.value};delete r[g],g==="stateId"?(delete r.cityId,delete r.neighborhoodId):g==="cityId"&&delete r.neighborhoodId,_(1,r)};return ls(async()=>{await Promise.all([h(),V(),_()])}),(g,r)=>{const K=Bs,I=E,ss=R("LoadingSpinner"),es=ie,ts=ge;return i(),l("div",null,[s("div",ve,[s("div",be,[r[9]||(r[9]=s("div",{class:"header__text"},[s("h1",{class:"header__title"},"Paróquias Católicas"),s("p",{class:"header__description"}," Encontre paróquias católicas em todo o Brasil. Descubra horários de missa, eventos, ministérios e entre em contato com a comunidade local. ")],-1)),s("div",fe,[s("div",ye,[s("div",$e,c(e(n).total),1),r[6]||(r[6]=s("div",{class:"stat-card__label"},"Paróquias",-1))]),s("div",ke,[s("div",Pe,c(e(P).length),1),r[7]||(r[7]=s("div",{class:"stat-card__label"},"Estados",-1))]),s("div",Ce,[s("div",Ie,c(e(a).length),1),r[8]||(r[8]=s("div",{class:"stat-card__label"},"Dioceses",-1))])])])]),s("div",we,[s("div",Fe,[s("aside",Te,[p(K,{filters:e(o),states:e(P),cities:e(C),neighborhoods:e(w),dioceses:e(a),loading:e($),onApplyFilters:J,onClearFilters:z,onStateChange:X,onCityChange:Z},null,8,["filters","states","cities","neighborhoods","dioceses","loading"])]),s("main",qe,[s("div",Se,[s("div",De,[s("h2",Be,c(e(n).total)+" "+c(e(n).total===1?"paróquia encontrada":"paróquias encontradas"),1),e(H)?(i(),l("div",Ne,[r[10]||(r[10]=s("span",{class:"active-filters__label"},"Filtros ativos:",-1)),s("div",Me,[e(o).search?(i(),l("span",Ee,[v(' Busca: "'+c(e(o).search)+'" ',1),s("button",{onClick:r[0]||(r[0]=F=>D("search")),class:"filter-tag__remove"},[p(I,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):m("",!0),e(U)?(i(),l("span",Le,[v(" Estado: "+c(e(U).name)+" ",1),s("button",{onClick:r[1]||(r[1]=F=>D("stateId")),class:"filter-tag__remove"},[p(I,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):m("",!0),e(W)?(i(),l("span",Ve,[v(" Cidade: "+c(e(W).name)+" ",1),s("button",{onClick:r[2]||(r[2]=F=>D("cityId")),class:"filter-tag__remove"},[p(I,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):m("",!0),e(j)?(i(),l("span",Ae,[v(" Bairro: "+c(e(j).name)+" ",1),s("button",{onClick:r[3]||(r[3]=F=>D("neighborhoodId")),class:"filter-tag__remove"},[p(I,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):m("",!0),e(x)?(i(),l("span",Ue,[v(" Diocese: "+c(e(x).name)+" ",1),s("button",{onClick:r[4]||(r[4]=F=>D("dioceseId")),class:"filter-tag__remove"},[p(I,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):m("",!0)])])):m("",!0)])]),e($)?(i(),l("div",We,[p(ss,{class:"loading-state__spinner"}),r[11]||(r[11]=s("p",{class:"loading-state__text"},"Carregando paróquias...",-1))])):e(k)?(i(),l("div",je,[p(I,{name:"heroicons:exclamation-triangle",class:"error-state__icon"}),r[13]||(r[13]=s("h3",{class:"error-state__title"},"Erro ao carregar paróquias",-1)),s("p",xe,c(e(k)),1),s("button",{onClick:r[5]||(r[5]=F=>e(_)()),class:"error-state__button"},[p(I,{name:"heroicons:arrow-path",class:"button__icon"}),r[12]||(r[12]=v(" Tentar novamente "))])])):e(d).length===0?(i(),l("div",ze,[p(I,{name:"heroicons:building-library",class:"empty-state__icon"}),r[15]||(r[15]=s("h3",{class:"empty-state__title"},"Nenhuma paróquia encontrada",-1)),r[16]||(r[16]=s("p",{class:"empty-state__message"}," Tente ajustar os filtros ou fazer uma busca diferente. ",-1)),s("button",{onClick:z,class:"empty-state__button"},[p(I,{name:"heroicons:x-mark",class:"button__icon"}),r[14]||(r[14]=v(" Limpar filtros "))])])):(i(),l("div",Ge,[(i(!0),l(T,null,q(e(d),F=>(i(),M(es,{key:F.id,parish:F},null,8,["parish"]))),128))])),!e($)&&!e(k)&&e(d).length>0?(i(),M(ts,{key:4,"current-page":e(n).page,"total-pages":e(n).totalPages,total:e(n).total,limit:e(n).limit,"has-next":e(n).hasNext,"has-prev":e(n).hasPrev,onPrevPage:e(y),onNextPage:e(u),onGoToPage:e(Q)},null,8,["current-page","total-pages","total","limit","has-next","has-prev","onPrevPage","onNextPage","onGoToPage"])):m("",!0)])])])])}}});export{He as default};

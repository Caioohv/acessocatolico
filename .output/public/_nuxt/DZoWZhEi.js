import $ from"./Cu5UbMqw.js";import{_ as h}from"./BIsvGA9u.js";import{e as j,T as H,J,C as K,F as k,g as Q,K as P,S as G,c as d,k as s,b as m,a as t,w as D,H as r,l as c,I as i,t as p,L as T,M as W,N as x,O as X,P as Y,Q as Z,q as _,R as C,o as u,d as f}from"./DOw91aXk.js";import{u as ee}from"./Bt6Nh3qD.js";const te={class:"container mx-auto px-4 py-8"},oe={key:0,class:"flex justify-center items-center py-32"},se={key:1,class:"text-center py-32"},le={key:2},ae={class:"mb-8"},re={class:"flex items-center space-x-2 text-sm mb-4"},ne={class:"bg-white rounded-lg shadow-sm border p-6"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},de={class:"md:col-span-2"},ue={key:0,class:"text-sm text-gray-500 mt-1"},me={class:"mt-6"},pe={class:"bg-white rounded-lg shadow-sm border p-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be={class:"mt-6"},ve={class:"flex items-center gap-3"},ce={key:0,class:"mt-4"},xe={class:"bg-white rounded-lg shadow-sm border p-6"},fe={class:"space-y-6"},ye={class:"flex items-center gap-3"},we={key:0,class:"space-y-6"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De={class:"flex items-center gap-3"},Ue={class:"bg-white rounded-lg shadow-sm border p-6"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Me={class:"bg-white rounded-lg shadow-sm border p-6"},Se={class:"space-y-6"},Pe={key:0,class:"flex flex-wrap gap-2 mt-2"},Te=["onClick"],Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},qe={class:"space-y-4"},Re={class:"flex items-center gap-3"},Ae={class:"flex items-center gap-3"},Fe={class:"bg-white rounded-lg shadow-sm border p-6"},Ie={class:"space-y-6"},Oe={class:"text-sm text-gray-500 mt-1"},Ne={class:"text-sm text-gray-500 mt-1"},Le={class:"flex justify-between items-center pt-6 border-t"},Be={class:"flex gap-4"},ze=["disabled"],$e={class:"flex gap-4"},he=["disabled"],je=["disabled"],Ye=j({__name:"editar",setup(He){const q=H().params.slug;J({title:"Editar Evento - Acesso Católico",description:"Edite as informações do seu evento católico",robots:"noindex, nofollow"});const{user:U}=K(),{event:a,loading:R,getEvent:A,updateEvent:F,deleteEvent:I,generateSlug:O}=ee(),g=k(!1),y=k(!1),b=k(""),o=k({title:"",description:"",category:"",status:"DRAFT",startDate:"",endDate:"",location:"",address:"",isOnline:!1,onlineUrl:"",registrationRequired:!0,maxParticipants:null,minParticipants:1,registrationStart:"",registrationEnd:"",requiresApproval:!1,price:null,tags:[],ageMin:null,ageMax:null,isPublic:!0,isFeatured:!1,metaTitle:"",metaDescription:""}),N=()=>{if(b.value.trim()){const n=b.value.split(",").map(e=>e.trim()).filter(e=>e.length>0).filter(e=>!o.value.tags.includes(e));o.value.tags=[...o.value.tags,...n],b.value=""}},L=n=>{o.value.tags.splice(n,1)},w=n=>n?new Date(n).toISOString().slice(0,16):"",V=()=>{a.value&&(o.value={title:a.value.title,description:a.value.description,category:a.value.category,status:a.value.status,startDate:w(a.value.startDate),endDate:w(a.value.endDate||""),location:a.value.location,address:a.value.address||"",isOnline:a.value.isOnline,onlineUrl:a.value.onlineUrl||"",registrationRequired:a.value.registrationRequired,maxParticipants:a.value.maxParticipants,minParticipants:a.value.minParticipants,registrationStart:w(a.value.registrationStart||""),registrationEnd:w(a.value.registrationEnd||""),requiresApproval:a.value.requiresApproval,price:a.value.price?Number(a.value.price):null,tags:Array.isArray(a.value.tags)?a.value.tags:[],ageMin:a.value.ageMin,ageMax:a.value.ageMax,isPublic:a.value.isPublic,isFeatured:a.value.isFeatured,metaTitle:a.value.metaTitle||"",metaDescription:a.value.metaDescription||""})},B=async()=>{o.value.status="DRAFT",await M()},M=async()=>{if(!(g.value||!a.value)){g.value=!0;try{const n={...o.value,endDate:o.value.endDate||void 0,address:o.value.address||void 0,onlineUrl:o.value.isOnline?o.value.onlineUrl:void 0,maxParticipants:o.value.maxParticipants||void 0,registrationStart:o.value.registrationStart||void 0,registrationEnd:o.value.registrationEnd||void 0,price:o.value.price||void 0,ageMin:o.value.ageMin||void 0,ageMax:o.value.ageMax||void 0,metaTitle:o.value.metaTitle||void 0,metaDescription:o.value.metaDescription||void 0,tags:o.value.tags.length>0?o.value.tags:void 0},e=await F(a.value.id,n);e.success&&e.event&&await C(`/eventos/${e.event.slug}`)}catch(n){console.error("Erro ao atualizar evento:",n),alert("Erro ao atualizar evento: "+(n.message||"Erro desconhecido"))}finally{g.value=!1}}},z=async()=>{if(!(!a.value||!confirm("Tem certeza que deseja excluir este evento? Esta ação não pode ser desfeita."))){y.value=!0;try{await I(a.value.id),await C("/eventos")}catch(n){console.error("Erro ao excluir evento:",n),alert("Erro ao excluir evento: "+(n.message||"Erro desconhecido"))}finally{y.value=!1}}};return Q(async()=>{if(await A(q),!U.value||!a.value)throw P({statusCode:404,statusMessage:"Evento não encontrado"});if(U.value.id!==a.value.organizerId&&U.value.role!=="ADMIN")throw P({statusCode:403,statusMessage:"Você não tem permissão para editar este evento"});V()}),G(a,n=>{n&&V()}),(n,e)=>{const v=$,E=h;return u(),d("div",te,[s(R)?(u(),d("div",oe,[m(v,{name:"eos-icons:loading",class:"w-8 h-8 text-blue-600 animate-spin"})])):s(a)?(u(),d("div",le,[t("div",ae,[t("nav",re,[m(E,{to:"/eventos",class:"text-blue-600 hover:text-blue-800"},{default:D(()=>e[27]||(e[27]=[f("Eventos")])),_:1,__:[27]}),m(v,{name:"heroicons:chevron-right",class:"w-4 h-4 text-gray-400"}),m(E,{to:`/eventos/${s(a).slug}`,class:"text-blue-600 hover:text-blue-800"},{default:D(()=>[f(p(s(a).title),1)]),_:1},8,["to"]),m(v,{name:"heroicons:chevron-right",class:"w-4 h-4 text-gray-400"}),e[28]||(e[28]=t("span",{class:"text-gray-500"},"Editar",-1))]),e[29]||(e[29]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Editar evento",-1)),e[30]||(e[30]=t("p",{class:"text-gray-600 mt-2"},"Atualize as informações do seu evento",-1))]),t("form",{onSubmit:_(M,["prevent"]),class:"space-y-8"},[t("div",ne,[e[37]||(e[37]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informações básicas",-1)),t("div",ie,[t("div",de,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Título do evento * ",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s(o).title=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Retiro de Carnaval 2024"},null,512),[[i,s(o).title]]),s(o).title?(u(),d("p",ue," URL: /eventos/"+p(s(O)(s(o).title)),1)):c("",!0)]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Categoria * ",-1)),r(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>s(o).category=l),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},e[32]||(e[32]=[W('<option value="">Selecione uma categoria</option><option value="Retiro">Retiro</option><option value="Missa">Missa</option><option value="Palestra">Palestra</option><option value="Formação">Formação</option><option value="Encontro">Encontro</option><option value="Celebração">Celebração</option><option value="Peregrinação">Peregrinação</option><option value="Adoração">Adoração</option><option value="Novena">Novena</option><option value="Outro">Outro</option>',11)]),512),[[T,s(o).category]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),r(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>s(o).status=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},e[34]||(e[34]=[t("option",{value:"DRAFT"},"Rascunho",-1),t("option",{value:"PUBLISHED"},"Publicado",-1),t("option",{value:"CANCELLED"},"Cancelado",-1),t("option",{value:"COMPLETED"},"Finalizado",-1)]),512),[[T,s(o).status]])])]),t("div",me,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descrição * ",-1)),r(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=l=>s(o).description=l),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Breve descrição do evento..."},null,512),[[i,s(o).description]])])]),t("div",pe,[e[44]||(e[44]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Data e local",-1)),t("div",ge,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Data e hora de início * ",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s(o).startDate=l),type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s(o).startDate]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Data e hora de fim ",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s(o).endDate=l),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s(o).endDate]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Local * ",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>s(o).location=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Igreja São João Batista"},null,512),[[i,s(o).location]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Endereço completo ",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s(o).address=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Rua, número, bairro, cidade - UF"},null,512),[[i,s(o).address]])])]),t("div",be,[t("label",ve,[r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>s(o).isOnline=l),type:"checkbox",class:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[x,s(o).isOnline]]),e[42]||(e[42]=t("span",{class:"text-sm font-medium text-gray-700"}," Este é um evento online ",-1))]),s(o).isOnline?(u(),d("div",ce,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Link da transmissão ",-1)),r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>s(o).onlineUrl=l),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."},null,512),[[i,s(o).onlineUrl]])])):c("",!0)])]),t("div",xe,[e[51]||(e[51]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Inscrições",-1)),t("div",fe,[t("div",null,[t("label",ye,[r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>s(o).registrationRequired=l),type:"checkbox",class:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[x,s(o).registrationRequired]]),e[45]||(e[45]=t("span",{class:"text-sm font-medium text-gray-700"}," Requer inscrição prévia ",-1))])]),s(o).registrationRequired?(u(),d("div",we,[t("div",Ee,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Número máximo de participantes ",-1)),r(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>s(o).maxParticipants=l),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 100"},null,512),[[i,s(o).maxParticipants,void 0,{number:!0}]])]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Número mínimo de participantes ",-1)),r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>s(o).minParticipants=l),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 10"},null,512),[[i,s(o).minParticipants,void 0,{number:!0}]])])]),t("div",ke,[t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Início das inscrições ",-1)),r(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s(o).registrationStart=l),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s(o).registrationStart]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Fim das inscrições ",-1)),r(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>s(o).registrationEnd=l),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s(o).registrationEnd]])])]),t("div",null,[t("label",De,[r(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>s(o).requiresApproval=l),type:"checkbox",class:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[x,s(o).requiresApproval]]),e[50]||(e[50]=t("span",{class:"text-sm font-medium text-gray-700"}," Inscrições requerem aprovação manual ",-1))])])])):c("",!0)])]),t("div",Ue,[e[54]||(e[54]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Preço",-1)),t("div",Ve,[t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Valor (R$) ",-1)),r(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>s(o).price=l),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"},null,512),[[i,s(o).price,void 0,{number:!0}]]),e[53]||(e[53]=t("p",{class:"text-sm text-gray-500 mt-1"}," Deixe vazio para evento gratuito ",-1))])])]),t("div",Me,[e[60]||(e[60]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configurações avançadas",-1)),t("div",Se,[t("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tags ",-1)),r(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>X(b)?b.value=l:null),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"jovens, família, oração (separadas por vírgula)",onBlur:N},null,544),[[i,s(b)]]),s(o).tags&&s(o).tags.length>0?(u(),d("div",Pe,[(u(!0),d(Y,null,Z(s(o).tags,(l,S)=>(u(),d("span",{key:S,class:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm flex items-center gap-1"},[f(" #"+p(l)+" ",1),t("button",{type:"button",onClick:Ke=>L(S),class:"text-blue-600 hover:text-blue-800"}," × ",8,Te)]))),128))])):c("",!0)]),t("div",Ce,[t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Idade mínima ",-1)),r(t("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>s(o).ageMin=l),type:"number",min:"0",max:"120",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 16"},null,512),[[i,s(o).ageMin,void 0,{number:!0}]])]),t("div",null,[e[57]||(e[57]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Idade máxima ",-1)),r(t("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>s(o).ageMax=l),type:"number",min:"0",max:"120",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 35"},null,512),[[i,s(o).ageMax,void 0,{number:!0}]])])]),t("div",qe,[t("div",null,[t("label",Re,[r(t("input",{"onUpdate:modelValue":e[20]||(e[20]=l=>s(o).isPublic=l),type:"checkbox",class:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[x,s(o).isPublic]]),e[58]||(e[58]=t("span",{class:"text-sm font-medium text-gray-700"}," Evento público (visível na listagem) ",-1))])]),t("div",null,[t("label",Ae,[r(t("input",{"onUpdate:modelValue":e[21]||(e[21]=l=>s(o).isFeatured=l),type:"checkbox",class:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[x,s(o).isFeatured]]),e[59]||(e[59]=t("span",{class:"text-sm font-medium text-gray-700"}," Destacar evento ",-1))])])])])]),t("div",Fe,[e[63]||(e[63]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"SEO e Metadata",-1)),t("div",Ie,[t("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Título SEO ",-1)),r(t("input",{"onUpdate:modelValue":e[22]||(e[22]=l=>s(o).metaTitle=l),type:"text",maxlength:"60",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Título para mecanismos de busca (máx. 60 caracteres)"},null,512),[[i,s(o).metaTitle]]),t("p",Oe,p((s(o).metaTitle||"").length)+"/60 caracteres ",1)]),t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descrição SEO ",-1)),r(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=l=>s(o).metaDescription=l),maxlength:"160",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descrição para mecanismos de busca (máx. 160 caracteres)"},null,512),[[i,s(o).metaDescription]]),t("p",Ne,p((s(o).metaDescription||"").length)+"/160 caracteres ",1)])])]),t("div",Le,[t("div",Be,[m(E,{to:`/eventos/${s(a).slug}`,class:"text-gray-600 hover:text-gray-800 px-6 py-3 rounded-lg transition-colors"},{default:D(()=>e[64]||(e[64]=[f(" Cancelar ")])),_:1,__:[64]},8,["to"]),s(a).status==="PUBLISHED"?(u(),d("button",{key:0,type:"button",onClick:z,disabled:s(y),class:"border border-red-300 hover:bg-red-50 text-red-700 px-6 py-3 rounded-lg transition-colors disabled:opacity-50"},p(s(y)?"Excluindo...":"Excluir evento"),9,ze)):c("",!0)]),t("div",$e,[t("button",{type:"button",onClick:B,disabled:s(g),class:"border border-gray-300 hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-lg transition-colors disabled:opacity-50"},p(s(g)?"Salvando...":"Salvar rascunho"),9,he),t("button",{type:"submit",disabled:s(g),class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors disabled:opacity-50"},p(s(g)?"Salvando...":"Salvar alterações"),9,je)])])],32)])):(u(),d("div",se,[m(v,{name:"heroicons:exclamation-triangle",class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e[25]||(e[25]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Evento não encontrado",-1)),e[26]||(e[26]=t("p",{class:"text-gray-600 mb-6"},"O evento que você está tentando editar não existe ou foi removido.",-1)),m(E,{to:"/eventos",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors inline-flex items-center gap-2"},{default:D(()=>[m(v,{name:"heroicons:arrow-left",class:"w-5 h-5"}),e[24]||(e[24]=f(" Voltar aos eventos "))]),_:1,__:[24]})]))])}}});export{Ye as default};

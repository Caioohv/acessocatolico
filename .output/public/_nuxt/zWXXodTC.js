import{b as $,_ as q}from"./XrZAkBch.js";import{_ as F}from"./BgPBUjXO.js";import{_ as B}from"./D4djxuXc.js";import{_ as G}from"./CZSs4om5.js";import{_ as j}from"./87MXhpfO.js";import{u as M}from"./YdcuF5yM.js";import{e as z,u as Q,F as h,E as J,c as r,a as e,b as o,j as W,l as _,w as d,k as t,G as H,o as l,d as V,t as c,B as x,P as L,Q as K}from"./DOw91aXk.js";import"./Cu5UbMqw.js";import"./BzWLyf5Z.js";import"./BIsvGA9u.js";const X={class:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 py-12"},Y={class:"max-w-4xl mx-auto px-4"},Z={class:"flex items-center gap-3"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"flex justify-center"},te={key:0,class:"space-y-6"},ae={class:"flex items-center justify-between"},oe={class:"flex items-center gap-3"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"space-y-3"},ne={class:"text-gray-900"},re={class:"text-gray-900"},de={class:"text-gray-900"},ce={class:"space-y-3"},me={class:"text-gray-900"},ue={class:"text-gray-900"},pe={class:"text-gray-900"},fe={class:"flex items-center gap-3"},ge={class:"flex items-center gap-3"},xe={key:0,class:"flex justify-center py-8"},ye={class:"animate-spin w-8 h-8"},_e={key:1,class:"space-y-4"},he={class:"flex flex-col items-center"},ve={key:0,class:"w-0.5 h-8 bg-gray-200 mt-2"},be={class:"flex-1 min-w-0"},Ee={class:"flex items-center gap-2 mb-1"},Ce={class:"font-medium text-gray-900"},Ne={class:"text-sm text-gray-500"},we={key:0,class:"text-sm text-gray-600 mb-2"},De={key:1,class:"text-xs text-gray-500"},Ve={key:2,class:"text-center py-8 text-gray-500"},Re={class:"flex items-center gap-3"},Pe={class:"prose max-w-none"},Ie={key:0},Ue={key:1},ke={key:2},Se={key:3},Ae={key:4},Te={class:"text-center py-8"},We=z({__name:"status",setup(Oe){const b=M();Q({title:"Status do Cadastro - AcessoCat√≥lico",meta:[{name:"description",content:"Consulte o status do seu cadastro de padre na plataforma AcessoCat√≥lico"}]});const p=h(!1),E=h(!1),m=J({email:"",cpf:""}),a=h(null),f=h([]);async function R(){var i;if(!m.email||!m.cpf){b.add({title:"Campos obrigat√≥rios",description:"Por favor, preencha email e CPF.",color:"red"});return}p.value=!0,E.value=!0,a.value=null,f.value=[];try{const s=await $fetch("/api/priests/search",{method:"POST",body:{email:m.email,cpf:m.cpf.replace(/\D/g,"")}});s.success&&s.data&&(a.value=s.data,a.value.id&&await P())}catch(s){console.error("Search error:",s),b.add({title:"Erro na consulta",description:((i=s.data)==null?void 0:i.message)||"N√£o foi poss√≠vel consultar o cadastro.",color:"red"})}finally{p.value=!1}}async function P(){var i,s;if((i=a.value)!=null&&i.id)try{const n=await $fetch(`/api/priests/history?registrationId=${a.value.id}`);n.success&&((s=n.data)!=null&&s.history)&&(f.value=n.data.history)}catch(n){console.error("Error loading history:",n)}}function I(i){let s=i.target.value.replace(/\D/g,"");s=s.replace(/(\d{3})(\d)/,"$1.$2"),s=s.replace(/(\d{3})(\d)/,"$1.$2"),s=s.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),m.cpf=s}function v(i){return new Date(i).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function C(i){return{PENDING:"Pendente",UNDER_REVIEW:"Em An√°lise",APPROVED:"Aprovado",REJECTED:"Rejeitado",REQUIRES_DOCUMENTATION:"Documenta√ß√£o Necess√°ria"}[i]||i}function U(i){return{PENDING:"amber",UNDER_REVIEW:"blue",APPROVED:"green",REJECTED:"red",REQUIRES_DOCUMENTATION:"orange"}[i]||"gray"}function k(i){return{PENDING:"i-heroicons-clock",UNDER_REVIEW:"i-heroicons-eye",APPROVED:"i-heroicons-check-circle",REJECTED:"i-heroicons-x-circle",REQUIRES_DOCUMENTATION:"i-heroicons-document-text"}[i]||"i-heroicons-clock"}function S(i){return{PENDING:"bg-amber-100 text-amber-600",UNDER_REVIEW:"bg-blue-100 text-blue-600",APPROVED:"bg-green-100 text-green-600",REJECTED:"bg-red-100 text-red-600",REQUIRES_DOCUMENTATION:"bg-orange-100 text-orange-600"}[i]||"bg-gray-100 text-gray-600"}return(i,s)=>{const n=q,N=F,w=H("UFormGroup"),A=$,T=B,y=G,O=j;return l(),r("div",X,[e("div",Y,[s[22]||(s[22]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Status do Cadastro"),e("p",{class:"text-gray-600"},"Consulte o andamento do seu cadastro de padre")],-1)),o(y,{class:"mb-8 shadow-lg"},{header:d(()=>[e("div",Z,[o(n,{name:"i-heroicons-magnifying-glass",class:"w-5 h-5 text-purple-600"}),s[2]||(s[2]=e("h2",{class:"text-lg font-semibold"},"Consultar Status",-1))])]),default:d(()=>[o(T,{onSubmit:R,class:"space-y-4"},{default:d(()=>[e("div",ee,[o(w,{label:"Email",required:""},{default:d(()=>[o(N,{modelValue:t(m).email,"onUpdate:modelValue":s[0]||(s[0]=g=>t(m).email=g),type:"email",placeholder:"seu.email@exemplo.com",disabled:t(p)},null,8,["modelValue","disabled"])]),_:1}),o(w,{label:"CPF",required:""},{default:d(()=>[o(N,{modelValue:t(m).cpf,"onUpdate:modelValue":s[1]||(s[1]=g=>t(m).cpf=g),placeholder:"000.000.000-00",disabled:t(p),onInput:I},null,8,["modelValue","disabled"])]),_:1})]),e("div",se,[o(A,{type:"submit",loading:t(p),size:"lg",icon:"i-heroicons-magnifying-glass"},{default:d(()=>s[3]||(s[3]=[V(" Consultar Status ")])),_:1,__:[3]},8,["loading"])])]),_:1})]),_:1}),t(a)?(l(),r("div",te,[o(y,{class:"shadow-lg"},{header:d(()=>[e("div",ae,[e("div",oe,[o(n,{name:"i-heroicons-user",class:"w-5 h-5 text-purple-600"}),s[4]||(s[4]=e("h2",{class:"text-lg font-semibold"},"Informa√ß√µes do Cadastro",-1))]),o(O,{color:U(t(a).status),variant:"subtle",size:"lg"},{default:d(()=>[V(c(C(t(a).status)),1)]),_:1},8,["color"])])]),default:d(()=>[e("div",ie,[e("div",le,[e("div",null,[s[5]||(s[5]=e("span",{class:"text-sm font-medium text-gray-500"},"Nome Completo",-1)),e("p",ne,c(t(a).firstName)+" "+c(t(a).lastName),1)]),e("div",null,[s[6]||(s[6]=e("span",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",re,c(t(a).email),1)]),e("div",null,[s[7]||(s[7]=e("span",{class:"text-sm font-medium text-gray-500"},"N√∫mero de Ordena√ß√£o",-1)),e("p",de,c(t(a).ordinationNumber),1)])]),e("div",ce,[e("div",null,[s[8]||(s[8]=e("span",{class:"text-sm font-medium text-gray-500"},"Diocese de Ordena√ß√£o",-1)),e("p",me,c(t(a).ordinationDiocese.name),1)]),e("div",null,[s[9]||(s[9]=e("span",{class:"text-sm font-medium text-gray-500"},"Data de Cadastro",-1)),e("p",ue,c(v(t(a).createdAt)),1)]),e("div",null,[s[10]||(s[10]=e("span",{class:"text-sm font-medium text-gray-500"},"√öltima Atualiza√ß√£o",-1)),e("p",pe,c(v(t(a).statusUpdatedAt)),1)])])]),e("div",{class:x(["mt-6 p-4 rounded-lg",t(a).emailVerified?"bg-green-50":"bg-yellow-50"])},[e("div",fe,[o(n,{name:t(a).emailVerified?"i-heroicons-check-circle":"i-heroicons-exclamation-triangle",class:x([t(a).emailVerified?"text-green-600":"text-yellow-600","w-5 h-5"])},null,8,["name","class"]),e("div",null,[e("p",{class:x(["font-medium",t(a).emailVerified?"text-green-900":"text-yellow-900"])},c(t(a).emailVerified?"Email Verificado":"Email N√£o Verificado"),3),e("p",{class:x(["text-sm",t(a).emailVerified?"text-green-700":"text-yellow-700"])},c(t(a).emailVerified?"Seu email foi confirmado com sucesso.":"Verifique sua caixa de entrada e confirme seu email."),3)])])],2)]),_:1}),o(y,{class:"shadow-lg"},{header:d(()=>[e("div",ge,[o(n,{name:"i-heroicons-clock",class:"w-5 h-5 text-purple-600"}),s[11]||(s[11]=e("h2",{class:"text-lg font-semibold"},"Hist√≥rico do Processo",-1))])]),default:d(()=>{var g;return[t(p)?(l(),r("div",xe,[e("div",ye,[o(n,{name:"i-heroicons-arrow-path",class:"w-full h-full text-purple-600"})])])):(g=t(f))!=null&&g.length?(l(),r("div",_e,[(l(!0),r(L,null,K(t(f),(u,D)=>(l(),r("div",{key:u.id,class:x(["flex gap-4 pb-4",{"border-b":D<t(f).length-1}])},[e("div",he,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",S(u.toStatus)])},[o(n,{name:k(u.toStatus),class:"w-4 h-4"},null,8,["name"])],2),D<t(f).length-1?(l(),r("div",ve)):_("",!0)]),e("div",be,[e("div",Ee,[e("span",Ce,c(C(u.toStatus)),1),e("span",Ne,c(v(u.createdAt)),1)]),u.comments?(l(),r("p",we,c(u.comments),1)):_("",!0),u.adminEmail?(l(),r("p",De," Processado por: "+c(u.adminEmail),1)):_("",!0)])],2))),128))])):(l(),r("div",Ve,[o(n,{name:"i-heroicons-clock",class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s[12]||(s[12]=e("p",null,"Nenhum hist√≥rico dispon√≠vel ainda",-1))]))]}),_:1}),o(y,{class:"shadow-lg"},{header:d(()=>[e("div",Re,[o(n,{name:"i-heroicons-arrow-right",class:"w-5 h-5 text-purple-600"}),s[13]||(s[13]=e("h2",{class:"text-lg font-semibold"},"Pr√≥ximos Passos",-1))])]),default:d(()=>[e("div",Pe,[t(a).status==="PENDING"?(l(),r("div",Ie,s[14]||(s[14]=[e("p",{class:"text-gray-600 mb-4"},"Seu cadastro foi recebido e est√° na fila para an√°lise.",-1),e("ul",{class:"list-disc list-inside space-y-2 text-sm text-gray-600"},[e("li",null,"Confirme seu email se ainda n√£o o fez"),e("li",null,"Aguarde a an√°lise da nossa equipe (2-3 dias √∫teis)"),e("li",null,"Voc√™ receber√° notifica√ß√µes por email sobre mudan√ßas de status")],-1)]))):t(a).status==="UNDER_REVIEW"?(l(),r("div",Ue,s[15]||(s[15]=[e("p",{class:"text-gray-600 mb-4"},"Sua documenta√ß√£o est√° sendo analisada pela nossa equipe.",-1),e("ul",{class:"list-disc list-inside space-y-2 text-sm text-gray-600"},[e("li",null,"Nossa equipe est√° verificando seus documentos"),e("li",null,"Tempo estimado: 2-3 dias √∫teis"),e("li",null,"Voc√™ receber√° um email com o resultado")],-1)]))):t(a).status==="APPROVED"?(l(),r("div",ke,s[16]||(s[16]=[e("div",{class:"bg-green-50 p-4 rounded-lg"},[e("p",{class:"text-green-800 font-medium mb-2"},"üéâ Parab√©ns! Seu cadastro foi aprovado!"),e("ul",{class:"list-disc list-inside space-y-2 text-sm text-green-700"},[e("li",null,"Voc√™ deve ter recebido um email com suas credenciais de acesso"),e("li",null,"Acesse a plataforma e complete seu perfil"),e("li",null,"Conecte-se √† sua par√≥quia")])],-1)]))):t(a).status==="REJECTED"?(l(),r("div",Se,s[17]||(s[17]=[e("div",{class:"bg-red-50 p-4 rounded-lg"},[e("p",{class:"text-red-800 font-medium mb-2"},"Cadastro necessita corre√ß√µes"),e("ul",{class:"list-disc list-inside space-y-2 text-sm text-red-700"},[e("li",null,"Verifique os coment√°rios da nossa equipe"),e("li",null,"Corrija as informa√ß√µes necess√°rias"),e("li",null,"Reenvie sua documenta√ß√£o")])],-1)]))):t(a).status==="REQUIRES_DOCUMENTATION"?(l(),r("div",Ae,s[18]||(s[18]=[e("div",{class:"bg-yellow-50 p-4 rounded-lg"},[e("p",{class:"text-yellow-800 font-medium mb-2"},"Documenta√ß√£o adicional necess√°ria"),e("ul",{class:"list-disc list-inside space-y-2 text-sm text-yellow-700"},[e("li",null,"Alguns documentos precisam ser atualizados"),e("li",null,"Verifique os coment√°rios espec√≠ficos"),e("li",null,"Reenvie apenas os documentos solicitados")])],-1)]))):_("",!0)])]),_:1})])):t(E)&&!t(a)?(l(),W(y,{key:1,class:"shadow-lg"},{default:d(()=>[e("div",Te,[o(n,{name:"i-heroicons-magnifying-glass-minus",class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),s[19]||(s[19]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Cadastro n√£o encontrado",-1)),s[20]||(s[20]=e("p",{class:"text-gray-600 mb-6"}," N√£o encontramos nenhum cadastro com os dados informados. ",-1)),s[21]||(s[21]=e("div",{class:"space-y-2 text-sm text-gray-500"},[e("p",null,"‚Ä¢ Verifique se o email e CPF est√£o corretos"),e("p",null,"‚Ä¢ Certifique-se de que o cadastro foi submetido")],-1))])]),_:1})):_("",!0)])])}}});export{We as default};

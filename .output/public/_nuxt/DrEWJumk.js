import V from"./7SFTKAzv.js";import{e as O,h as F,G as os,D as w,c,a as s,k as g,b as n,d as f,l as t,n as H,v as us,x as K,F as T,B as A,j as W,m as ps,o as a,t as d,i as q,_ as ls,w as S,s as rs,A as _s,L as ms,E as U,p as hs}from"./DwCNKQGy.js";import{_ as gs}from"./CA11pW0l.js";import{a as vs}from"./DWLJyer9.js";import{u as as}from"./fNtvkFL-.js";import{u as fs}from"./CUnLz3wq.js";import"./8OS6Y6ZV.js";const bs={class:"parish-filters"},ys={class:"parish-filters__header"},Is={class:"parish-filters__title"},$s={class:"filter-group"},ks={for:"search",class:"filter-label"},Ps={class:"filter-group"},Cs={for:"state",class:"filter-label"},Ms=["value"],ws={key:0,class:"filter-group"},Ls={for:"city",class:"filter-label"},Zs=["disabled"],Bs=["value"],Ns={key:1,class:"filter-group"},zs={for:"neighborhood",class:"filter-label"},Ss=["value"],js={class:"filter-group"},Ds={for:"diocese",class:"filter-label"},Fs=["value"],Ts={class:"parish-filters__actions"},xs=["disabled"],Gs=O({__name:"ParishFilters",props:{filters:{},states:{},cities:{},neighborhoods:{},dioceses:{},loading:{type:Boolean,default:!1}},emits:["apply-filters","clear-filters","state-change","city-change"],setup(x,{emit:u}){const $=x,P=u,l=F({...$.filters});os(()=>$.filters,v=>{l.value={...v}},{deep:!0});const Z=w(()=>!!(l.value.search||l.value.stateId||l.value.cityId||l.value.neighborhoodId||l.value.dioceseId)),C=()=>{const v=Object.fromEntries(Object.entries(l.value).filter(([e,M])=>M!==""&&M!==void 0));P("apply-filters",v)},B=()=>{l.value={},P("clear-filters")},o=()=>{l.value.cityId="",l.value.neighborhoodId="",l.value.stateId&&P("state-change",l.value.stateId)},r=()=>{l.value.neighborhoodId="",l.value.cityId&&P("city-change",l.value.cityId)},_=F();return os(()=>l.value.search,()=>{_.value&&clearTimeout(_.value),_.value=setTimeout(()=>{C()},500)}),(v,e)=>{const M=V,R=q("LoadingSpinner");return a(),c("div",bs,[s("div",ys,[s("h3",Is,[n(M,{name:"heroicons:funnel",class:"title__icon"}),e[5]||(e[5]=f(" Filtrar Paróquias "))]),t(Z)?(a(),c("button",{key:0,onClick:B,class:"parish-filters__clear",type:"button"},[n(M,{name:"heroicons:x-mark",class:"clear__icon"}),e[6]||(e[6]=f(" Limpar Filtros "))])):g("",!0)]),s("form",{onSubmit:ps(C,["prevent"]),class:"parish-filters__form"},[s("div",$s,[s("label",ks,[n(M,{name:"heroicons:magnifying-glass",class:"label__icon"}),e[7]||(e[7]=f(" Buscar "))]),H(s("input",{id:"search","onUpdate:modelValue":e[0]||(e[0]=h=>t(l).search=h),type:"text",placeholder:"Nome da paróquia, endereço...",class:"filter-input"},null,512),[[us,t(l).search]])]),s("div",Ps,[s("label",Cs,[n(M,{name:"heroicons:map",class:"label__icon"}),e[8]||(e[8]=f(" Estado "))]),H(s("select",{id:"state","onUpdate:modelValue":e[1]||(e[1]=h=>t(l).stateId=h),onChange:o,class:"filter-select"},[e[9]||(e[9]=s("option",{value:""},"Todos os estados",-1)),(a(!0),c(T,null,A(v.states,h=>{var L;return a(),c("option",{key:h.id,value:h.id},d(h.name)+" ("+d(((L=h._count)==null?void 0:L.parishes)||0)+") ",9,Ms)}),128))],544),[[K,t(l).stateId]])]),t(l).stateId?(a(),c("div",ws,[s("label",Ls,[n(M,{name:"heroicons:building-office-2",class:"label__icon"}),e[10]||(e[10]=f(" Cidade "))]),H(s("select",{id:"city","onUpdate:modelValue":e[2]||(e[2]=h=>t(l).cityId=h),onChange:r,class:"filter-select",disabled:v.cities.length===0},[e[11]||(e[11]=s("option",{value:""},"Todas as cidades",-1)),(a(!0),c(T,null,A(v.cities,h=>{var L;return a(),c("option",{key:h.id,value:h.id},d(h.name)+" ("+d(((L=h._count)==null?void 0:L.parishes)||0)+") ",9,Bs)}),128))],40,Zs),[[K,t(l).cityId]])])):g("",!0),t(l).cityId&&v.neighborhoods.length>0?(a(),c("div",Ns,[s("label",zs,[n(M,{name:"heroicons:map-pin",class:"label__icon"}),e[12]||(e[12]=f(" Bairro "))]),H(s("select",{id:"neighborhood","onUpdate:modelValue":e[3]||(e[3]=h=>t(l).neighborhoodId=h),class:"filter-select"},[e[13]||(e[13]=s("option",{value:""},"Todos os bairros",-1)),(a(!0),c(T,null,A(v.neighborhoods,h=>{var L;return a(),c("option",{key:h.id,value:h.id},d(h.name)+" ("+d(((L=h._count)==null?void 0:L.parishes)||0)+") ",9,Ss)}),128))],512),[[K,t(l).neighborhoodId]])])):g("",!0),s("div",js,[s("label",Ds,[n(M,{name:"heroicons:building-library",class:"label__icon"}),e[14]||(e[14]=f(" Diocese "))]),H(s("select",{id:"diocese","onUpdate:modelValue":e[4]||(e[4]=h=>t(l).dioceseId=h),class:"filter-select"},[e[15]||(e[15]=s("option",{value:""},"Todas as dioceses",-1)),(a(!0),c(T,null,A(v.dioceses,h=>{var L;return a(),c("option",{key:h.id,value:h.id},d(h.name)+" ("+d(((L=h._count)==null?void 0:L.parishes)||0)+") ",9,Fs)}),128))],512),[[K,t(l).dioceseId]])]),s("div",Ts,[s("button",{type:"submit",class:"filter-button filter-button--primary",disabled:v.loading},[v.loading?(a(),W(R,{key:0,class:"button__spinner"})):(a(),W(M,{key:1,name:"heroicons:magnifying-glass",class:"button__icon"})),e[16]||(e[16]=f(" Filtrar "))],8,xs)])],32)])}}}),qs=ls(Gs,[["__scopeId","data-v-a8bc4605"]]),As={class:"parish-card"},Ws={class:"parish-card__header"},Rs={class:"parish-card__image"},Es={class:"parish-card__badge"},Hs={class:"parish-card__diocese"},Us={class:"parish-card__content"},Vs={class:"parish-card__name"},Os={class:"parish-card__location"},Xs={class:"parish-card__location-text"},Ys={key:0},Js={key:0,class:"parish-card__description"},Qs={class:"parish-card__stats"},Ks={class:"stat"},st={class:"stat__value"},tt={class:"stat"},et={class:"stat__value"},ot={key:1,class:"parish-card__priest"},at={class:"priest__name"},it={class:"parish-card__contact"},nt={key:0,class:"contact-item"},lt={class:"contact-item__text"},rt={key:1,class:"contact-item"},ct={class:"contact-item__text"},dt={class:"parish-card__social"},ut=["href","title"],pt={class:"parish-card__footer"},_t=O({__name:"ParishCard",props:{parish:{}},setup(x){const u=x,$=w(()=>u.parish.priests.find(o=>o.isMain)),P=w(()=>u.parish.contacts.filter(o=>["facebook","instagram","whatsapp","youtube","twitter"].includes(o.type))),l=(o,r)=>o.length<=r?o:o.substring(0,r)+"...",Z=o=>{switch(o.type){case"facebook":return o.value.startsWith("http")?o.value:`https://facebook.com/${o.value}`;case"instagram":return o.value.startsWith("http")?o.value:`https://instagram.com/${o.value.replace("@","")}`;case"whatsapp":return`https://wa.me/${o.value.replace(/\D/g,"")}`;case"youtube":return o.value.startsWith("http")?o.value:`https://youtube.com/@${o.value}`;case"twitter":return o.value.startsWith("http")?o.value:`https://twitter.com/${o.value.replace("@","")}`;default:return o.value}},C=o=>({facebook:"simple-icons:facebook",instagram:"simple-icons:instagram",whatsapp:"simple-icons:whatsapp",youtube:"simple-icons:youtube",twitter:"simple-icons:twitter"})[o]||"heroicons:link",B=o=>({facebook:"Facebook",instagram:"Instagram",whatsapp:"WhatsApp",youtube:"YouTube",twitter:"Twitter"})[o]||"Link";return(o,r)=>{const _=V,v=gs;return a(),c("div",As,[s("div",Ws,[s("div",Rs,[n(_,{name:"heroicons:building-library",class:"parish-card__icon"})]),s("div",Es,[s("span",Hs,d(o.parish.diocese.name),1)])]),s("div",Us,[s("h3",Vs,d(o.parish.name),1),s("div",Os,[n(_,{name:"heroicons:map-pin",class:"parish-card__location-icon"}),s("span",Xs,[f(d(o.parish.city.name)+", "+d(o.parish.state.code)+" ",1),o.parish.neighborhood?(a(),c("span",Ys," - "+d(o.parish.neighborhood.name),1)):g("",!0)])]),o.parish.description?(a(),c("p",Js,d(l(o.parish.description,120)),1)):g("",!0),s("div",Qs,[s("div",Ks,[n(_,{name:"heroicons:calendar-days",class:"stat__icon"}),s("span",st,d(o.parish._count.events),1),r[0]||(r[0]=s("span",{class:"stat__label"},"Eventos",-1))]),s("div",tt,[n(_,{name:"heroicons:user-group",class:"stat__icon"}),s("span",et,d(o.parish._count.ministries),1),r[1]||(r[1]=s("span",{class:"stat__label"},"Ministérios",-1))])]),t($)?(a(),c("div",ot,[n(_,{name:"heroicons:user",class:"priest__icon"}),s("span",at,d(t($).user.profile.firstName)+" "+d(t($).user.profile.lastName),1),r[2]||(r[2]=s("span",{class:"priest__role"},"Pároco",-1))])):g("",!0),s("div",it,[o.parish.phone?(a(),c("div",nt,[n(_,{name:"heroicons:phone",class:"contact-item__icon"}),s("span",lt,d(o.parish.phone),1)])):g("",!0),o.parish.email?(a(),c("div",rt,[n(_,{name:"heroicons:envelope",class:"contact-item__icon"}),s("span",ct,d(o.parish.email),1)])):g("",!0)]),s("div",dt,[(a(!0),c(T,null,A(t(P),e=>(a(),c("a",{key:e.id,href:Z(e),target:"_blank",rel:"noopener noreferrer",class:"social-link",title:B(e.type)},[n(_,{name:C(e.type),class:"social-link__icon"},null,8,["name"])],8,ut))),128))])]),s("div",pt,[n(v,{to:`/paroquias/${o.parish.id}`,class:"parish-card__button"},{default:S(()=>[r[3]||(r[3]=s("span",null,"Ver Detalhes",-1)),n(_,{name:"heroicons:arrow-right",class:"button__icon"})]),_:1,__:[3]},8,["to"])])])}}}),mt={class:"parishes-map"},ht={class:"map-container"},gt={class:"map-header"},vt={class:"map-title"},ft={class:"map-controls"},bt={class:"map-wrapper"},yt={class:"user-popup"},It={class:"parish-popup"},$t={class:"popup-header"},kt={class:"popup-title"},Pt={class:"popup-diocese"},Ct={class:"popup-content"},Mt={class:"popup-info"},wt={class:"info-text"},Lt={key:0,class:"popup-info"},Zt={class:"info-text"},Bt={key:1,class:"popup-info"},Nt={class:"info-text"},zt={class:"popup-actions"},St={key:0,class:"map-loading"},jt={class:"loading-content"},Dt={key:1,class:"map-error"},Ft={class:"error-content"},Tt={class:"error-text"},xt={class:"map-legend"},Gt={key:0,class:"legend-item"},qt="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",At='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',is="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiM4QjVBMkIiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjx0ZXh0IHg9IjE2IiB5PSIyMSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmaWxsPSIjRkZGRkZGIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7ijJs8L3RleHQ+Cjwvc3ZnPgo=",ns="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTkiIGZpbGw9IiMzQjgyRjYiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjx0ZXh0IHg9IjIwIiB5PSIyNiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBmaWxsPSIjRkZGRkZGIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7wn5GOPC90ZXh0Pgo8L3N2Zz4K",Wt=O({__name:"ParishMap",props:{parishes:{},loading:{type:Boolean,default:!1},error:{default:""}},emits:["parishSelected","retry"],setup(x,{emit:u}){const $=x,P=F(),l=F(10),Z=F([-15.7942,-47.8822]),C=F(null),B=F(null),o=F(!1),r={zoomControl:!0,attributionControl:!0,scrollWheelZoom:!0,doubleClickZoom:!0,boxZoom:!0,keyboard:!0,dragging:!0,touchZoom:!0},_={maxZoom:18,minZoom:5},v={riseOnHover:!0,riseOffset:250},e={riseOnHover:!0,riseOffset:500},M={color:"#8B5A2B",fillColor:"#F59E0B",fillOpacity:.2,weight:2},R=w(()=>$.parishes.filter(m=>m.latitude&&m.longitude)),h=u,L=()=>{console.log("Map is ready"),$.parishes.length>0&&E()},ss=async()=>{o.value=!0;try{const m=await new Promise((I,G)=>{navigator.geolocation.getCurrentPosition(I,G,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:p,longitude:y}=m.coords;C.value=[p,y],Z.value=[p,y],l.value=12,ts(p,y)}catch(m){console.error("Geolocation error:",m),as().add({title:"Erro de Localização",description:"Não foi possível obter sua localização. Verifique as permissões do navegador.",color:"secondary"})}finally{o.value=!1}},ts=(m,p)=>{const y=$.parishes.filter(I=>I.latitude&&I.longitude).map(I=>({...I,distance:D(m,p,I.latitude,I.longitude)})).filter(I=>I.distance<=50).sort((I,G)=>I.distance-G.distance).slice(0,10);y.length>0&&as().add({title:"Paróquias Próximas",description:`Encontradas ${y.length} paróquias num raio de 50km`,color:"primary"})},D=(m,p,y,I)=>{const z=(y-m)*Math.PI/180,b=(I-p)*Math.PI/180,i=Math.sin(z/2)*Math.sin(z/2)+Math.cos(m*Math.PI/180)*Math.cos(y*Math.PI/180)*Math.sin(b/2)*Math.sin(b/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},E=()=>{if(!P.value||$.parishes.length===0)return;const m=[];for(const p of R.value)m.push([p.latitude,p.longitude]);C.value&&m.push(C.value),m.length>0&&P.value.leafletObject.fitBounds(m,{padding:[20,20]})},X=m=>{!m.latitude||!m.longitude||(B.value=m,Z.value=[m.latitude,m.longitude],l.value=14,h("parishSelected",m))},Y=m=>{if(!m.latitude||!m.longitude)return;const p=`https://www.google.com/maps/dir/?api=1&destination=${m.latitude},${m.longitude}&travelmode=driving`;window.open(p,"_blank")},J=()=>{h("retry")};return os(()=>$.parishes,m=>{m.length>0&&P.value&&ms(()=>{E()})},{deep:!0}),rs(()=>{}),(m,p)=>{const y=V,I=vs,G=q("LTileLayer"),z=q("LIcon"),b=q("LPopup"),i=q("LMarker"),Q=q("LCircle"),N=q("LMap");return a(),c("div",mt,[s("div",ht,[s("div",gt,[s("h3",vt,[n(y,{name:"heroicons:map",class:"title-icon"}),p[1]||(p[1]=f(" Paróquias no Mapa "))]),s("div",ft,[n(I,{onClick:ss,loading:t(o),variant:"outline",size:"sm",class:"locate-btn"},{default:S(()=>[n(y,{name:"heroicons:map-pin",class:"btn-icon"}),p[2]||(p[2]=f(" Minha Localização "))]),_:1,__:[2]},8,["loading"]),n(I,{onClick:E,variant:"outline",size:"sm",class:"fit-all-btn"},{default:S(()=>[n(y,{name:"heroicons:globe-americas",class:"btn-icon"}),p[3]||(p[3]=f(" Ver Todas "))]),_:1,__:[3]})])]),s("div",bt,[n(N,{ref_key:"map",ref:P,zoom:t(l),"onUpdate:zoom":p[0]||(p[0]=k=>_s(l)?l.value=k:null),center:t(Z),options:r,class:"leaflet-map",onReady:L},{default:S(()=>[n(G,{url:qt,attribution:At,options:_}),t(C)?(a(),W(i,{key:0,"lat-lng":t(C),options:e},{default:S(()=>[n(z,{"icon-url":ns,"icon-size":[40,40],"icon-anchor":[20,40]}),n(b,null,{default:S(()=>[s("div",yt,[n(y,{name:"heroicons:map-pin",class:"popup-icon"}),p[4]||(p[4]=s("span",null,"Sua Localização",-1))])]),_:1})]),_:1},8,["lat-lng"])):g("",!0),(a(!0),c(T,null,A(t(R),k=>(a(),W(i,{key:k.id,"lat-lng":[k.latitude,k.longitude],options:v,onClick:es=>X(k)},{default:S(()=>[n(z,{"icon-url":is,"icon-size":[32,32],"icon-anchor":[16,32]}),n(b,null,{default:S(()=>[s("div",It,[s("div",$t,[s("h4",kt,d(k.name),1),s("span",Pt,d(k.diocese.name),1)]),s("div",Ct,[s("div",Mt,[n(y,{name:"heroicons:map-pin",class:"info-icon"}),s("span",wt,d(k.address)+", "+d(k.city.name)+" - "+d(k.state.code),1)]),k.phone?(a(),c("div",Lt,[n(y,{name:"heroicons:phone",class:"info-icon"}),s("span",Zt,d(k.phone),1)])):g("",!0),k.masses.length>0?(a(),c("div",Bt,[n(y,{name:"heroicons:clock",class:"info-icon"}),s("span",Nt,d(k.masses.length)+" horários de missa ",1)])):g("",!0)]),s("div",zt,[n(I,{to:`/paroquias/${k.id}`,size:"xs",variant:"solid",class:"view-parish-btn"},{default:S(()=>p[5]||(p[5]=[f(" Ver Detalhes ")])),_:2,__:[5]},1032,["to"]),n(I,{onClick:es=>Y(k),size:"xs",variant:"outline",class:"directions-btn"},{default:S(()=>[n(y,{name:"heroicons:arrow-top-right-on-square",class:"btn-icon"}),p[6]||(p[6]=f(" Rotas "))]),_:2,__:[6]},1032,["onClick"])])])]),_:2},1024)]),_:2},1032,["lat-lng","onClick"]))),128)),t(B)?(a(),W(Q,{key:1,"lat-lng":[t(B).latitude,t(B).longitude],radius:500,options:M},null,8,["lat-lng"])):g("",!0)]),_:1},8,["zoom","center"]),m.loading?(a(),c("div",St,[s("div",jt,[n(y,{name:"heroicons:arrow-path",class:"loading-icon animate-spin"}),p[7]||(p[7]=s("span",{class:"loading-text"},"Carregando paróquias...",-1))])])):g("",!0),m.error?(a(),c("div",Dt,[s("div",Ft,[n(y,{name:"heroicons:exclamation-triangle",class:"error-icon"}),s("span",Tt,d(m.error),1),n(I,{onClick:J,size:"sm",variant:"outline",class:"retry-btn"},{default:S(()=>p[8]||(p[8]=[f(" Tentar Novamente ")])),_:1,__:[8]})])])):g("",!0)]),s("div",xt,[s("div",{class:"legend-item"},[s("img",{src:is,alt:"Parish",class:"legend-icon"}),p[9]||(p[9]=s("span",{class:"legend-text"},"Paróquias",-1))]),t(C)?(a(),c("div",Gt,[s("img",{src:ns,alt:"User",class:"legend-icon"}),p[10]||(p[10]=s("span",{class:"legend-text"},"Sua Localização",-1))])):g("",!0)])])])}}}),Rt=ls(Wt,[["__scopeId","data-v-c554f807"]]),Et={key:0,class:"pagination"},Ht={class:"pagination__info"},Ut={class:"pagination__text"},Vt={class:"pagination__controls"},Ot=["disabled"],Xt={class:"pagination__numbers"},Yt={key:1,class:"pagination__ellipsis"},Jt=["onClick"],Qt={key:2,class:"pagination__ellipsis"},Kt=["disabled"],se=O({__name:"ParishPagination",props:{currentPage:{},totalPages:{},total:{},limit:{},hasNext:{type:Boolean},hasPrev:{type:Boolean}},emits:["prev-page","next-page","go-to-page"],setup(x){const u=x,$=w(()=>(u.currentPage-1)*u.limit+1),P=w(()=>Math.min(u.currentPage*u.limit,u.total)),l=w(()=>{const _=[],v=[];for(let e=Math.max(2,u.currentPage-2);e<=Math.min(u.totalPages-1,u.currentPage+2);e++)_.push(e);if(u.currentPage-2>2)v.push(2,"...");else for(let e=2;e<Math.max(2,u.currentPage-2);e++)v.push(e);if(v.push(..._),u.currentPage+2<u.totalPages-1)v.push("...",u.totalPages-1);else for(let e=Math.min(u.totalPages-1,u.currentPage+2)+1;e<u.totalPages;e++)v.push(e);return _}),Z=w(()=>u.totalPages>1&&(u.currentPage>3||u.totalPages<=5)),C=w(()=>u.totalPages>1&&(u.currentPage<u.totalPages-2||u.totalPages<=5)),B=w(()=>u.currentPage>4&&u.totalPages>7),o=w(()=>u.currentPage<u.totalPages-3&&u.totalPages>7);return(r,_)=>{const v=V;return r.totalPages>1?(a(),c("div",Et,[s("div",Ht,[s("span",Ut," Mostrando "+d(t($))+" - "+d(t(P))+" de "+d(r.total)+" paróquias ",1)]),s("div",Vt,[s("button",{onClick:_[0]||(_[0]=e=>r.$emit("prev-page")),disabled:!r.hasPrev,class:"pagination__button pagination__button--prev",type:"button"},[n(v,{name:"heroicons:chevron-left",class:"button__icon"}),_[4]||(_[4]=f(" Anterior "))],8,Ot),s("div",Xt,[t(Z)?(a(),c("button",{key:0,onClick:_[1]||(_[1]=e=>r.$emit("go-to-page",1)),class:U(["pagination__number",{"pagination__number--active":r.currentPage===1}]),type:"button"}," 1 ",2)):g("",!0),t(B)?(a(),c("span",Yt,"...")):g("",!0),(a(!0),c(T,null,A(t(l),e=>(a(),c("button",{key:e,onClick:M=>r.$emit("go-to-page",e),class:U(["pagination__number",{"pagination__number--active":r.currentPage===e}]),type:"button"},d(e),11,Jt))),128)),t(o)?(a(),c("span",Qt,"...")):g("",!0),t(C)?(a(),c("button",{key:3,onClick:_[2]||(_[2]=e=>r.$emit("go-to-page",r.totalPages)),class:U(["pagination__number",{"pagination__number--active":r.currentPage===r.totalPages}]),type:"button"},d(r.totalPages),3)):g("",!0)]),s("button",{onClick:_[3]||(_[3]=e=>r.$emit("next-page")),disabled:!r.hasNext,class:"pagination__button pagination__button--next",type:"button"},[_[5]||(_[5]=f(" Próxima ")),n(v,{name:"heroicons:chevron-right",class:"button__icon"})],8,Kt)])])):g("",!0)}}}),te={class:"parishes-header"},ee={class:"header__content"},oe={class:"header__stats"},ae={class:"stat-card"},ie={class:"stat-card__value"},ne={class:"stat-card"},le={class:"stat-card__value"},re={class:"stat-card"},ce={class:"stat-card__value"},de={class:"parishes-content"},ue={class:"content__layout"},pe={class:"content__sidebar"},_e={class:"content__main"},me={class:"results-header"},he={class:"results-header__info"},ge={class:"results-header__title"},ve={key:0,class:"active-filters"},fe={class:"active-filters__list"},be={key:0,class:"filter-tag"},ye={key:1,class:"filter-tag"},Ie={key:2,class:"filter-tag"},$e={key:3,class:"filter-tag"},ke={key:4,class:"filter-tag"},Pe={class:"view-toggle"},Ce={key:0,class:"loading-state"},Me={key:1,class:"error-state"},we={class:"error-state__message"},Le={key:2,class:"empty-state"},Ze={key:0,class:"parishes-grid"},Be={key:1,class:"parishes-map"},xe=O({__name:"index",setup(x){hs({title:"Paróquias Católicas - AcessoCatólico",ogTitle:"Paróquias Católicas - AcessoCatólico",description:"Encontre paróquias católicas em todo o Brasil. Descubra horários de missa, eventos, ministérios e entre em contato com a comunidade local.",ogDescription:"Encontre paróquias católicas em todo o Brasil. Descubra horários de missa, eventos, ministérios e entre em contato com a comunidade local.",ogImage:"/og-parishes.jpg",twitterCard:"summary_large_image"});const{parishes:u,loading:$,error:P,pagination:l,states:Z,cities:C,neighborhoods:B,dioceses:o,filters:r,loadParishes:_,loadStates:v,loadCities:e,loadNeighborhoods:M,loadDioceses:R,nextPage:h,prevPage:L,goToPage:ss,clearFilters:ts}=fs(),D=F("list"),E=w(()=>!!(r.value.search||r.value.stateId||r.value.cityId||r.value.neighborhoodId||r.value.dioceseId)),X=w(()=>Z.value.find(b=>b.id===r.value.stateId)),Y=w(()=>C.value.find(b=>b.id===r.value.cityId)),J=w(()=>B.value.find(b=>b.id===r.value.neighborhoodId)),m=w(()=>o.value.find(b=>b.id===r.value.dioceseId)),p=b=>{_(1,b)},y=()=>{ts()},I=b=>{e(b)},G=b=>{M(b)},z=b=>{const i={...r.value};delete i[b],b==="stateId"?(delete i.cityId,delete i.neighborhoodId):b==="cityId"&&delete i.neighborhoodId,_(1,i)};return rs(async()=>{await Promise.all([v(),R(),_()])}),(b,i)=>{const Q=qs,N=V,k=q("LoadingSpinner"),es=_t,cs=Rt,ds=se;return a(),c("div",null,[s("div",te,[s("div",ee,[i[11]||(i[11]=s("div",{class:"header__text"},[s("h1",{class:"header__title"},"Paróquias Católicas"),s("p",{class:"header__description"}," Encontre paróquias católicas em todo o Brasil. Descubra horários de missa, eventos, ministérios e entre em contato com a comunidade local. ")],-1)),s("div",oe,[s("div",ae,[s("div",ie,d(t(l).total),1),i[8]||(i[8]=s("div",{class:"stat-card__label"},"Paróquias",-1))]),s("div",ne,[s("div",le,d(t(Z).length),1),i[9]||(i[9]=s("div",{class:"stat-card__label"},"Estados",-1))]),s("div",re,[s("div",ce,d(t(o).length),1),i[10]||(i[10]=s("div",{class:"stat-card__label"},"Dioceses",-1))])])])]),s("div",de,[s("div",ue,[s("aside",pe,[n(Q,{filters:t(r),states:t(Z),cities:t(C),neighborhoods:t(B),dioceses:t(o),loading:t($),onApplyFilters:p,onClearFilters:y,onStateChange:I,onCityChange:G},null,8,["filters","states","cities","neighborhoods","dioceses","loading"])]),s("main",_e,[s("div",me,[s("div",he,[s("h2",ge,d(t(l).total)+" "+d(t(l).total===1?"paróquia encontrada":"paróquias encontradas"),1),t(E)?(a(),c("div",ve,[i[12]||(i[12]=s("span",{class:"active-filters__label"},"Filtros ativos:",-1)),s("div",fe,[t(r).search?(a(),c("span",be,[f(' Busca: "'+d(t(r).search)+'" ',1),s("button",{onClick:i[0]||(i[0]=j=>z("search")),class:"filter-tag__remove"},[n(N,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):g("",!0),t(X)?(a(),c("span",ye,[f(" Estado: "+d(t(X).name)+" ",1),s("button",{onClick:i[1]||(i[1]=j=>z("stateId")),class:"filter-tag__remove"},[n(N,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):g("",!0),t(Y)?(a(),c("span",Ie,[f(" Cidade: "+d(t(Y).name)+" ",1),s("button",{onClick:i[2]||(i[2]=j=>z("cityId")),class:"filter-tag__remove"},[n(N,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):g("",!0),t(J)?(a(),c("span",$e,[f(" Bairro: "+d(t(J).name)+" ",1),s("button",{onClick:i[3]||(i[3]=j=>z("neighborhoodId")),class:"filter-tag__remove"},[n(N,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):g("",!0),t(m)?(a(),c("span",ke,[f(" Diocese: "+d(t(m).name)+" ",1),s("button",{onClick:i[4]||(i[4]=j=>z("dioceseId")),class:"filter-tag__remove"},[n(N,{name:"heroicons:x-mark",class:"filter-tag__icon"})])])):g("",!0)])])):g("",!0)]),s("div",Pe,[s("button",{onClick:i[5]||(i[5]=j=>D.value="list"),class:U(["view-toggle__button",{active:t(D)==="list"}]),"aria-label":"Vista em lista"},[n(N,{name:"heroicons:list-bullet",class:"view-toggle__icon"}),i[13]||(i[13]=f(" Lista "))],2),s("button",{onClick:i[6]||(i[6]=j=>D.value="map"),class:U(["view-toggle__button",{active:t(D)==="map"}]),"aria-label":"Vista em mapa"},[n(N,{name:"heroicons:map",class:"view-toggle__icon"}),i[14]||(i[14]=f(" Mapa "))],2)])]),t($)?(a(),c("div",Ce,[n(k,{class:"loading-state__spinner"}),i[15]||(i[15]=s("p",{class:"loading-state__text"},"Carregando paróquias...",-1))])):t(P)?(a(),c("div",Me,[n(N,{name:"heroicons:exclamation-triangle",class:"error-state__icon"}),i[17]||(i[17]=s("h3",{class:"error-state__title"},"Erro ao carregar paróquias",-1)),s("p",we,d(t(P)),1),s("button",{onClick:i[7]||(i[7]=j=>t(_)()),class:"error-state__button"},[n(N,{name:"heroicons:arrow-path",class:"button__icon"}),i[16]||(i[16]=f(" Tentar novamente "))])])):t(u).length===0?(a(),c("div",Le,[n(N,{name:"heroicons:building-library",class:"empty-state__icon"}),i[19]||(i[19]=s("h3",{class:"empty-state__title"},"Nenhuma paróquia encontrada",-1)),i[20]||(i[20]=s("p",{class:"empty-state__message"}," Tente ajustar os filtros ou fazer uma busca diferente. ",-1)),s("button",{onClick:y,class:"empty-state__button"},[n(N,{name:"heroicons:x-mark",class:"button__icon"}),i[18]||(i[18]=f(" Limpar filtros "))])])):g("",!0),!t($)&&!t(P)&&t(u).length>0?(a(),c(T,{key:3},[t(D)==="list"?(a(),c("div",Ze,[(a(!0),c(T,null,A(t(u),j=>(a(),W(es,{key:j.id,parish:j},null,8,["parish"]))),128))])):t(D)==="map"?(a(),c("div",Be,[n(cs,{parishes:t(u),loading:t($)},null,8,["parishes","loading"])])):g("",!0),t(D)==="list"?(a(),W(ds,{key:2,"current-page":t(l).page,"total-pages":t(l).totalPages,total:t(l).total,limit:t(l).limit,"has-next":t(l).hasNext,"has-prev":t(l).hasPrev,onPrevPage:t(L),onNextPage:t(h),onGoToPage:t(ss)},null,8,["current-page","total-pages","total","limit","has-next","has-prev","onPrevPage","onNextPage","onGoToPage"])):g("",!0)],64)):g("",!0)])])])])}}});export{xe as default};

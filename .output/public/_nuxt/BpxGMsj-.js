const R=()=>{const i=async(e,t)=>await $fetch(`/api/events/${e}/form`,{method:"POST",body:t}),l=async(e,t)=>await $fetch(`/api/events/${e}/form`,{method:"PUT",body:t}),c=async e=>{try{return await $fetch(`/api/events/${e}/form`)}catch(t){if(t.statusCode===404)return null;throw t}},u=async e=>await $fetch(`/api/events/${e}/form`,{method:"DELETE"}),m=async(e,t)=>await $fetch(`/api/forms/${e}/fields`,{method:"POST",body:t}),d=async(e,t)=>await $fetch(`/api/forms/fields/${e}`,{method:"PUT",body:t}),f=async e=>await $fetch(`/api/forms/fields/${e}`,{method:"DELETE"}),h=async(e,t)=>await $fetch(`/api/forms/${e}/fields/reorder`,{method:"PUT",body:{fieldOrders:t}}),b=async(e,t,r)=>await $fetch(`/api/events/${e}/form/submit`,{method:"POST",body:{data:t,userInfo:r}}),p=async(e,t=1,r=20,a)=>{const n=new URLSearchParams({page:t.toString(),limit:r.toString()});return a&&n.append("status",a),await $fetch(`/api/events/${e}/form/submissions?${n}`)},E=async e=>await $fetch(`/api/forms/submissions/${e}`),$=async(e,t,r)=>await $fetch(`/api/forms/submissions/${e}/status`,{method:"PUT",body:{status:t,rejectedReason:r}}),g=async e=>await $fetch(`/api/forms/submissions/${e}`,{method:"DELETE"}),v=async(e,t="csv")=>{const r=await $fetch(`/api/events/${e}/form/export?format=${t}`,{responseType:"blob"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=`event-registrations.${t}`,n.click(),URL.revokeObjectURL(a)},s=(e,t)=>{if(e.isRequired&&(!t||t===""))return`${e.label} é obrigatório`;if(!t||t==="")return null;switch(e.type){case"EMAIL":if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return"Email inválido";break;case"PHONE":if(!/^\(?([0-9]{2})\)?[-. ]?([0-9]{4,5})[-. ]?([0-9]{4})$/.test(t))return"Telefone inválido";break;case"NUMBER":if(isNaN(Number(t)))return"Deve ser um número válido";break;case"CPF":if(!o(t))return"CPF inválido";break;case"CEP":if(!/^\d{5}-?\d{3}$/.test(t))return"CEP inválido";break}return e.minLength&&t.length<e.minLength?`Mínimo de ${e.minLength} caracteres`:e.maxLength&&t.length>e.maxLength?`Máximo de ${e.maxLength} caracteres`:e.pattern&&!new RegExp(e.pattern).test(t)?"Formato inválido":null},w=(e,t)=>{const r={};for(const a of e.fields){if(a.showIfField&&a.showIfValue&&t[a.showIfField]!==a.showIfValue)continue;const n=s(a,t[a.name]);n&&(r[a.name]=n)}return r},F=()=>[{value:"TEXT",label:"Texto"},{value:"EMAIL",label:"Email"},{value:"PHONE",label:"Telefone"},{value:"NUMBER",label:"Número"},{value:"DATE",label:"Data"},{value:"DATETIME",label:"Data e Hora"},{value:"TIME",label:"Hora"},{value:"SELECT",label:"Seleção Única"},{value:"RADIO",label:"Opções (Radio)"},{value:"CHECKBOX",label:"Múltipla Escolha"},{value:"MULTISELECT",label:"Seleção Múltipla"},{value:"TEXTAREA",label:"Texto Longo"},{value:"FILE",label:"Arquivo"},{value:"BOOLEAN",label:"Sim/Não"},{value:"CPF",label:"CPF"},{value:"RG",label:"RG"},{value:"CEP",label:"CEP"}],T=(e,t)=>!e.showIfField||!e.showIfValue?!0:t[e.showIfField]===e.showIfValue,y=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_").trim(),o=e=>{if(e=e.replace(/[^\d]+/g,""),e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let t=0;for(let a=0;a<9;a++)t+=parseInt(e.charAt(a))*(10-a);let r=t*10%11;if((r===10||r===11)&&(r=0),r!==parseInt(e.charAt(9)))return!1;t=0;for(let a=0;a<10;a++)t+=parseInt(e.charAt(a))*(11-a);return r=t*10%11,(r===10||r===11)&&(r=0),r===parseInt(e.charAt(10))};return{createForm:i,updateForm:l,getForm:c,deleteForm:u,addField:m,updateField:d,deleteField:f,reorderFields:h,submitForm:b,getSubmissions:p,getSubmission:E,updateSubmissionStatus:$,deleteSubmission:g,exportSubmissions:v,validateField:s,validateForm:w,getFieldTypeOptions:F,isFieldVisible:T,generateSlug:y,validateCPF:o}};export{R as u};

import Z from"./Cu5UbMqw.js";import{_ as tt}from"./BIsvGA9u.js";import{e as et,T as st,C as ot,F as y,f as z,g as at,J as rt,S as nt,c as r,j as b,k as e,b as d,a as t,w as I,t as l,l as g,d as _,P as w,Q as k,H as lt,I as it,O as ct,U as dt,q as ut,V as gt,o as a,K as mt}from"./DOw91aXk.js";import{u as ht}from"./Bt6Nh3qD.js";const pt={class:"min-h-screen bg-gray-50"},xt={key:0,class:"flex justify-center items-center py-32"},_t={key:1,class:"container mx-auto px-4 py-8"},vt={class:"flex items-center space-x-2 text-sm mb-6"},yt={class:"text-gray-500"},ft={class:"bg-white rounded-lg shadow-sm overflow-hidden mb-8"},bt={key:0,class:"relative h-96"},wt=["src","alt"],kt={class:"absolute inset-0 bg-black bg-opacity-40 flex items-end"},Et={class:"p-8 text-white"},Ct={class:"text-4xl font-bold mb-2"},Dt={class:"text-xl opacity-90"},It={key:1,class:"p-8"},St={class:"text-4xl font-bold text-gray-900 mb-4"},Rt={class:"text-xl text-gray-600"},Bt={class:"p-6 border-t flex flex-wrap gap-4"},Lt=["disabled"],Tt={key:1,class:"bg-green-600 text-white px-6 py-3 rounded-lg inline-flex items-center gap-2 cursor-default"},$t={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Nt={class:"lg:col-span-2 space-y-8"},Mt={class:"bg-white rounded-lg shadow-sm p-8"},Pt=["innerHTML"],jt={key:1,class:"text-gray-600"},zt={key:0,class:"bg-white rounded-lg shadow-sm p-8"},Vt={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ot=["onClick"],At=["src","alt"],Ft={class:"bg-white rounded-lg shadow-sm p-8"},qt={key:0,class:"mb-8"},Gt={class:"flex gap-4"},Ut=["src","alt"],Ht={class:"flex-1"},Jt={class:"flex justify-end mt-2"},Kt=["disabled"],Qt={class:"space-y-6"},Wt=["src","alt"],Xt={class:"flex-1"},Yt={class:"flex items-center gap-2 mb-1"},Zt={class:"font-medium text-gray-900"},te={class:"text-sm text-gray-500"},ee={class:"text-gray-600"},se={key:0,class:"text-center py-8 text-gray-500"},oe={class:"space-y-6"},ae={class:"bg-white rounded-lg shadow-sm p-6"},re={class:"space-y-4"},ne={class:"flex items-start gap-3"},le={class:"font-medium text-gray-900"},ie={class:"text-sm text-gray-500"},ce={class:"flex items-start gap-3"},de={class:"font-medium text-gray-900"},ue={key:0,class:"text-sm text-gray-500"},ge={key:1,class:"text-sm text-blue-600"},me={class:"flex items-center gap-3"},he={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium"},pe={key:0,class:"flex items-center gap-3"},xe={class:"font-medium text-gray-900"},_e={key:1,class:"flex items-center gap-3"},ve={class:"text-gray-600"},ye={class:"flex-1 bg-gray-200 rounded-full h-2"},fe={key:2,class:"flex items-start gap-3"},be={class:"flex flex-wrap gap-2"},we={class:"bg-white rounded-lg shadow-sm p-6"},ke={class:"flex items-center gap-4"},Ee=["src","alt"],Ce={class:"font-medium text-gray-900"},De={class:"text-sm text-gray-500"},Ie={key:0,class:"mt-4 pt-4 border-t"},Se={class:"text-sm text-gray-600"},Re={key:0,class:"bg-white rounded-lg shadow-sm p-6"},Be={class:"space-y-3"},Le=["href"],Te={class:"flex-1"},$e={class:"font-medium text-gray-900"},Ne={class:"text-sm text-gray-500"},Me={key:2,class:"text-center py-32"},Pe={class:"relative max-w-4xl max-h-full"},je=["src","alt"],Ue=et({__name:"[slug]",setup(ze){const S=st().params.slug,{user:p}=ot(),{event:s,loading:R,userRegistration:B,registrationCount:E,comments:L,getEvent:T,registerForEvent:V,getEventComments:$,addEventComment:O}=ht(),v=y(!1),x=y(""),f=y(!1),C=y(!1),h=y(0),N=z(()=>!(!p.value||!s.value||B.value||s.value.maxParticipants&&E.value>=s.value.maxParticipants||s.value.registrationEnd&&new Date(s.value.registrationEnd)<new Date)),A=z(()=>!p.value||!s.value?!1:p.value.id===s.value.organizerId||p.value.role==="ADMIN"),F=async()=>{if(N.value){v.value=!0;try{await V(s.value.id),await T(S)}catch(i){console.error("Erro ao se inscrever:",i)}finally{v.value=!1}}},q=async()=>{var n,u;const i=window.location.href,o=((n=s.value)==null?void 0:n.title)||"Evento";if(navigator.share)try{await navigator.share({title:o,text:(u=s.value)==null?void 0:u.description,url:i})}catch{}else try{await navigator.clipboard.writeText(i),alert("Link copiado para a área de transferência!")}catch(m){console.error("Erro ao copiar link:",m)}},G=async()=>{if(x.value.trim()){f.value=!0;try{await O(s.value.id,x.value.trim()),x.value="",await $(s.value.id)}catch(i){console.error("Erro ao adicionar comentário:",i)}finally{f.value=!1}}},U=i=>{h.value=i,C.value=!0},M=()=>{C.value=!1},H=()=>{h.value>0&&h.value--},J=()=>{h.value<s.value.gallery.length-1&&h.value++},K=(i,o)=>{const n=new Date(i),u={weekday:"long",year:"numeric",month:"long",day:"numeric"};if(o){const m=new Date(o);return n.toDateString()===m.toDateString()?n.toLocaleDateString("pt-BR",u):`${n.toLocaleDateString("pt-BR",u)} - ${m.toLocaleDateString("pt-BR",u)}`}return n.toLocaleDateString("pt-BR",u)},Q=(i,o)=>{const n=new Date(i),u={hour:"2-digit",minute:"2-digit"};if(o){const m=new Date(o);return`${n.toLocaleTimeString("pt-BR",u)} - ${m.toLocaleTimeString("pt-BR",u)}`}return n.toLocaleTimeString("pt-BR",u)},W=i=>new Date(i).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),X=(i,o="BRL")=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:o}).format(i),Y=i=>({PRIEST:"Padre",ADMIN:"Administrador",USER:"Usuário"})[i]||i;return at(async()=>{await T(S),s.value&&(await $(s.value.id),rt({title:s.value.title,description:s.value.description,ogTitle:s.value.title,ogDescription:s.value.description,ogType:"article",ogImage:s.value.coverImage,twitterCard:"summary_large_image"}))}),nt(s,i=>{if(i===null&&!R.value)throw mt({statusCode:404,statusMessage:"Evento não encontrado"})}),(i,o)=>{var m,P,j;const n=Z,u=tt;return a(),r("div",pt,[e(R)?(a(),r("div",xt,[d(n,{name:"eos-icons:loading",class:"w-8 h-8 text-blue-600 animate-spin"})])):e(s)?(a(),r("div",_t,[t("nav",vt,[d(u,{to:"/eventos",class:"text-blue-600 hover:text-blue-800"},{default:I(()=>o[2]||(o[2]=[_("Eventos")])),_:1,__:[2]}),d(n,{name:"heroicons:chevron-right",class:"w-4 h-4 text-gray-400"}),t("span",yt,l(e(s).title),1)]),t("div",ft,[e(s).coverImage?(a(),r("div",bt,[t("img",{src:e(s).coverImage,alt:e(s).title,class:"w-full h-full object-cover"},null,8,wt),t("div",kt,[t("div",Et,[t("h1",Ct,l(e(s).title),1),t("p",Dt,l(e(s).description),1)])])])):(a(),r("div",It,[t("h1",St,l(e(s).title),1),t("p",Rt,l(e(s).description),1)])),t("div",Bt,[e(N)?(a(),r("button",{key:0,onClick:F,disabled:e(v),class:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-6 py-3 rounded-lg transition-colors inline-flex items-center gap-2"},[e(v)?(a(),b(n,{key:0,name:"eos-icons:loading",class:"w-5 h-5 animate-spin"})):(a(),b(n,{key:1,name:"heroicons:ticket",class:"w-5 h-5"})),_(" "+l(e(v)?"Inscrevendo...":"Inscrever-se"),1)],8,Lt)):e(B)?(a(),r("button",Tt,[d(n,{name:"heroicons:check-circle",class:"w-5 h-5"}),o[3]||(o[3]=_(" Inscrito "))])):g("",!0),t("button",{onClick:q,class:"border border-gray-300 hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-lg transition-colors inline-flex items-center gap-2"},[d(n,{name:"heroicons:share",class:"w-5 h-5"}),o[4]||(o[4]=_(" Compartilhar "))]),e(A)?(a(),b(u,{key:2,to:`/eventos/${e(s).slug}/editar`,class:"border border-gray-300 hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-lg transition-colors inline-flex items-center gap-2"},{default:I(()=>[d(n,{name:"heroicons:pencil",class:"w-5 h-5"}),o[5]||(o[5]=_(" Editar "))]),_:1,__:[5]},8,["to"])):g("",!0)])]),t("div",$t,[t("div",Nt,[t("div",Mt,[o[6]||(o[6]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Sobre o evento",-1)),e(s).content?(a(),r("div",{key:0,class:"prose prose-lg max-w-none",innerHTML:e(s).content},null,8,Pt)):(a(),r("p",jt,l(e(s).description),1))]),e(s).gallery&&e(s).gallery.length>0?(a(),r("div",zt,[o[7]||(o[7]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Galeria",-1)),t("div",Vt,[(a(!0),r(w,null,k(e(s).gallery,(c,D)=>(a(),r("div",{key:D,class:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-90 transition-opacity",onClick:Oe=>U(D)},[t("img",{src:c,alt:`Imagem ${D+1}`,class:"w-full h-full object-cover"},null,8,At)],8,Ot))),128))])])):g("",!0),t("div",Ft,[o[8]||(o[8]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Comentários",-1)),e(p)?(a(),r("div",qt,[t("div",Gt,[t("img",{src:((m=e(p).profile)==null?void 0:m.avatar)||"/default-avatar.png",alt:`${(P=e(p).profile)==null?void 0:P.firstName} ${(j=e(p).profile)==null?void 0:j.lastName}`,class:"w-10 h-10 rounded-full"},null,8,Ut),t("div",Ht,[lt(t("textarea",{"onUpdate:modelValue":o[0]||(o[0]=c=>ct(x)?x.value=c:null),placeholder:"Deixe seu comentário...",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[it,e(x)]]),t("div",Jt,[t("button",{onClick:G,disabled:!e(x).trim()||e(f),class:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded-md transition-colors"},l(e(f)?"Enviando...":"Comentar"),9,Kt)])])])])):g("",!0),t("div",Qt,[(a(!0),r(w,null,k(e(L),c=>(a(),r("div",{key:c.id,class:"flex gap-4"},[t("img",{src:c.user.avatar||"/default-avatar.png",alt:c.user.name,class:"w-10 h-10 rounded-full"},null,8,Wt),t("div",Xt,[t("div",Yt,[t("h4",Zt,l(c.user.name),1),t("span",te,l(W(c.createdAt)),1)]),t("p",ee,l(c.content),1)])]))),128)),e(L).length===0?(a(),r("div",se," Seja o primeiro a comentar! ")):g("",!0)])])]),t("div",oe,[t("div",ae,[o[9]||(o[9]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informações do evento",-1)),t("div",re,[t("div",ne,[d(n,{name:"heroicons:calendar-days",class:"w-5 h-5 text-gray-400 mt-0.5"}),t("div",null,[t("p",le,l(K(e(s).startDate,e(s).endDate)),1),t("p",ie,l(Q(e(s).startDate,e(s).endDate)),1)])]),t("div",ce,[d(n,{name:"heroicons:map-pin",class:"w-5 h-5 text-gray-400 mt-0.5"}),t("div",null,[t("p",de,l(e(s).location),1),e(s).address?(a(),r("p",ue,l(e(s).address),1)):g("",!0),e(s).isOnline?(a(),r("p",ge,"Evento online")):g("",!0)])]),t("div",me,[d(n,{name:"heroicons:tag",class:"w-5 h-5 text-gray-400"}),t("span",he,l(e(s).category),1)]),e(s).price?(a(),r("div",pe,[d(n,{name:"heroicons:currency-dollar",class:"w-5 h-5 text-gray-400"}),t("p",xe,l(X(e(s).price,e(s).currency)),1)])):g("",!0),e(s).maxParticipants?(a(),r("div",_e,[d(n,{name:"heroicons:users",class:"w-5 h-5 text-gray-400"}),t("p",ve,l(e(E))+"/"+l(e(s).maxParticipants)+" inscritos ",1),t("div",ye,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:dt({width:`${e(E)/e(s).maxParticipants*100}%`})},null,4)])])):g("",!0),e(s).tags&&e(s).tags.length>0?(a(),r("div",fe,[d(n,{name:"heroicons:hashtag",class:"w-5 h-5 text-gray-400 mt-0.5"}),t("div",be,[(a(!0),r(w,null,k(e(s).tags,c=>(a(),r("span",{key:c,class:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-sm"}," #"+l(c),1))),128))])])):g("",!0)])]),t("div",we,[o[10]||(o[10]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Organizador",-1)),t("div",ke,[t("img",{src:e(s).organizer.avatar||"/default-avatar.png",alt:e(s).organizer.name,class:"w-12 h-12 rounded-full"},null,8,Ee),t("div",null,[t("h4",Ce,l(e(s).organizer.name),1),t("p",De,l(Y(e(s).organizer.role)),1)])]),e(s).parish?(a(),r("div",Ie,[t("p",Se,[d(n,{name:"heroicons:building-office",class:"w-4 h-4 inline mr-1"}),_(" "+l(e(s).parish.name),1)])])):g("",!0)]),e(s).attachments&&e(s).attachments.length>0?(a(),r("div",Re,[o[11]||(o[11]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Documentos",-1)),t("div",Be,[(a(!0),r(w,null,k(e(s).attachments,c=>(a(),r("a",{key:c.url,href:c.url,target:"_blank",class:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[d(n,{name:"heroicons:document",class:"w-5 h-5 text-gray-400"}),t("div",Te,[t("p",$e,l(c.name),1),t("p",Ne,l(c.type),1)]),d(n,{name:"heroicons:arrow-top-right-on-square",class:"w-4 h-4 text-gray-400"})],8,Le))),128))])])):g("",!0)])])])):(a(),r("div",Me,[d(n,{name:"heroicons:exclamation-triangle",class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o[13]||(o[13]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Evento não encontrado",-1)),o[14]||(o[14]=t("p",{class:"text-gray-600 mb-6"},"O evento que você está procurando não existe ou foi removido.",-1)),d(u,{to:"/eventos",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors inline-flex items-center gap-2"},{default:I(()=>[d(n,{name:"heroicons:arrow-left",class:"w-5 h-5"}),o[12]||(o[12]=_(" Voltar aos eventos "))]),_:1,__:[12]})])),(a(),b(gt,{to:"body"},[e(C)?(a(),r("div",{key:0,class:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:M},[t("div",Pe,[t("img",{src:e(s).gallery[e(h)],alt:`Imagem ${e(h)+1}`,class:"max-w-full max-h-full object-contain",onClick:o[1]||(o[1]=ut(()=>{},["stop"]))},null,8,je),t("button",{onClick:M,class:"absolute top-4 right-4 text-white hover:text-gray-300 text-2xl"}," × "),e(h)>0?(a(),r("button",{key:0,onClick:H,class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 text-2xl"}," ← ")):g("",!0),e(h)<e(s).gallery.length-1?(a(),r("button",{key:1,onClick:J,class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 text-2xl"}," → ")):g("",!0)])])):g("",!0)]))])}}});export{Ue as default};

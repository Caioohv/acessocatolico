import ge from"./Cu5UbMqw.js";import{P as U,r as be,t as ie,b as L}from"./XrZAkBch.js";import{_ as he}from"./BgPBUjXO.js";import{u as ye,_ as Pe,a as Ce}from"./BTueV4o8.js";import{_ as _e}from"./87MXhpfO.js";import{u as Re}from"./ClAAKQTV.js";import{e as k,j as _,o as m,w as c,r as w,d as x,m as q,k as t,X as Ee,f as S,Y as we,Z as Se,t as y,x as Ie,z as xe,b as i,B as M,l as T,c as z,P as te,Q as ue,J as Ve,F as O,E as re,g as $e,S as ze,a as s,M as Ne,O as ke,G as de,_ as De}from"./DOw91aXk.js";import{u as qe}from"./CPZ2uZrr.js";import{a as A,c as Ue,b as Ae}from"./BMyURyX1.js";import{_ as Be}from"./BVLAYOBV.js";import{u as Me}from"./YdcuF5yM.js";import"./BzWLyf5Z.js";import"./BIsvGA9u.js";import"./CAIiC8WR.js";const Oe=k({__name:"PaginationEllipsis",props:{asChild:{type:Boolean},as:{}},setup(e){const n=e;return A(),(a,r)=>(m(),_(t(U),q(n,{"data-type":"ellipsis"}),{default:c(()=>[w(a.$slots,"default",{},()=>[r[0]||(r[0]=x("…"))])]),_:3},16))}}),[F,Le]=Ue("PaginationRoot"),Te=k({__name:"PaginationRoot",props:{page:{},defaultPage:{default:1},itemsPerPage:{},total:{default:0},siblingCount:{default:2},disabled:{type:Boolean},showEdges:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"nav"}},emits:["update:page"],setup(e,{emit:n}){const a=e,r=n,{siblingCount:d,disabled:l,showEdges:u}=Ee(a);A();const R=Ae(a,"page",r,{defaultValue:a.defaultPage,passive:a.page===void 0}),E=S(()=>Math.max(1,Math.ceil(a.total/(a.itemsPerPage||1))));return Le({page:R,onPageChange(h){R.value=h},pageCount:E,siblingCount:d,disabled:l,showEdges:u}),(h,$)=>(m(),_(t(U),{as:h.as,"as-child":h.asChild},{default:c(()=>[w(h.$slots,"default",{page:t(R),pageCount:E.value})]),_:3},8,["as","as-child"]))}}),Fe=k({__name:"PaginationFirst",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const n=e,a=F();A();const r=S(()=>a.page.value===1||a.disabled.value);return(d,l)=>(m(),_(t(U),q(n,{"aria-label":"First Page",type:d.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=u=>!r.value&&t(a).onPageChange(1))}),{default:c(()=>[w(d.$slots,"default",{},()=>[l[1]||(l[1]=x("First page"))])]),_:3},16,["type","disabled"]))}}),je=k({__name:"PaginationLast",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const n=e,a=F();A();const r=S(()=>a.page.value===a.pageCount.value||a.disabled.value);return(d,l)=>(m(),_(t(U),q(n,{"aria-label":"Last Page",type:d.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=u=>!r.value&&t(a).onPageChange(t(a).pageCount.value))}),{default:c(()=>[w(d.$slots,"default",{},()=>[l[1]||(l[1]=x("Last page"))])]),_:3},16,["type","disabled"]))}});function D(e,n){const a=n-e+1;return Array.from({length:a},(r,d)=>d+e)}function Ge(e){return e.map(n=>typeof n=="number"?{type:"page",value:n}:{type:"ellipsis"})}const K="ellipsis";function Je(e,n,a,r){const l=n,u=Math.max(e-a,1),R=Math.min(e+a,l);if(r){const h=Math.min(2*a+5,n)-2,$=u>3&&Math.abs(l-h-1+1)>2&&Math.abs(u-1)>2,P=R<l-2&&Math.abs(l-h)>2&&Math.abs(l-R)>2;if(!$&&P)return[...D(1,h),K,l];if($&&!P){const f=D(l-h+1,l);return[1,K,...f]}if($&&P){const f=D(u,R);return[1,K,...f,K,l]}return D(1,l)}else{const E=a*2+1;return n<E?D(1,l):e<=a+1?D(1,E):n-e<=a?D(n-E+1,l):D(u,R)}}const Qe=k({__name:"PaginationList",props:{asChild:{type:Boolean},as:{}},setup(e){const n=e;A();const a=F(),r=S(()=>Ge(Je(a.page.value,a.pageCount.value,a.siblingCount.value,a.showEdges.value)));return(d,l)=>(m(),_(t(U),we(Se(n)),{default:c(()=>[w(d.$slots,"default",{items:r.value})]),_:3},16))}}),We=k({__name:"PaginationListItem",props:{value:{},asChild:{type:Boolean},as:{default:"button"}},setup(e){const n=e;A();const a=F(),r=S(()=>a.page.value===n.value),d=S(()=>a.disabled.value);return(l,u)=>(m(),_(t(U),q(n,{"data-type":"page","aria-label":`Page ${l.value}`,"aria-current":r.value?"page":void 0,"data-selected":r.value?"true":void 0,disabled:d.value,type:l.as==="button"?"button":void 0,onClick:u[0]||(u[0]=R=>!d.value&&t(a).onPageChange(l.value))}),{default:c(()=>[w(l.$slots,"default",{},()=>[x(y(l.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Xe=k({__name:"PaginationNext",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const n=e;A();const a=F(),r=S(()=>a.page.value===a.pageCount.value||a.disabled.value);return(d,l)=>(m(),_(t(U),q(n,{"aria-label":"Next Page",type:d.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=u=>!r.value&&t(a).onPageChange(t(a).page.value+1))}),{default:c(()=>[w(d.$slots,"default",{},()=>[l[1]||(l[1]=x("Next page"))])]),_:3},16,["type","disabled"]))}}),Ye=k({__name:"PaginationPrev",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const n=e;A();const a=F(),r=S(()=>a.page.value===1||a.disabled.value);return(d,l)=>(m(),_(t(U),q(n,{"aria-label":"Previous Page",type:d.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=u=>!r.value&&t(a).onPageChange(t(a).page.value-1))}),{default:c(()=>[w(d.$slots,"default",{},()=>[l[1]||(l[1]=x("Prev page"))])]),_:3},16,["type","disabled"]))}}),Ze={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},He={__name:"Pagination",props:{as:{type:null,required:!1},firstIcon:{type:String,required:!1},prevIcon:{type:String,required:!1},nextIcon:{type:String,required:!1},lastIcon:{type:String,required:!1},ellipsisIcon:{type:String,required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1,default:"md"},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(e,{emit:n}){const a=e,r=n,d=Ie(),{dir:l}=Re(),u=xe(),R=qe(be(a,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),r),E=S(()=>a.firstIcon||(l.value==="rtl"?u.ui.icons.chevronDoubleRight:u.ui.icons.chevronDoubleLeft)),h=S(()=>a.prevIcon||(l.value==="rtl"?u.ui.icons.chevronRight:u.ui.icons.chevronLeft)),$=S(()=>a.nextIcon||(l.value==="rtl"?u.ui.icons.chevronLeft:u.ui.icons.chevronRight)),P=S(()=>a.lastIcon||(l.value==="rtl"?u.ui.icons.chevronDoubleLeft:u.ui.icons.chevronDoubleRight)),C=S(()=>{var f;return ie({extend:ie(Ze),...((f=u.ui)==null?void 0:f.pagination)||{}})()});return(f,p)=>{var J;return m(),_(t(Te),q(t(R),{class:C.value.root({class:[(J=a.ui)==null?void 0:J.root,a.class]})}),{default:c(({page:N,pageCount:V})=>{var Q;return[i(t(Qe),{class:M(C.value.list({class:(Q=a.ui)==null?void 0:Q.list}))},{default:c(({items:ee})=>{var W,X,Y,Z;return[e.showControls||d.first?(m(),_(t(Fe),{key:0,"as-child":"",class:M(C.value.first({class:(W=a.ui)==null?void 0:W.first}))},{default:c(()=>[w(f.$slots,"first",{},()=>{var b;return[i(L,{color:e.color,variant:e.variant,size:e.size,icon:E.value,to:(b=e.to)==null?void 0:b.call(e,1)},null,8,["color","variant","size","icon","to"])]})]),_:3},8,["class"])):T("",!0),e.showControls||d.prev?(m(),_(t(Ye),{key:1,"as-child":"",class:M(C.value.prev({class:(X=a.ui)==null?void 0:X.prev}))},{default:c(()=>[w(f.$slots,"prev",{},()=>{var b;return[i(L,{color:e.color,variant:e.variant,size:e.size,icon:h.value,to:N>1?(b=e.to)==null?void 0:b.call(e,N-1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):T("",!0),(m(!0),z(te,null,ue(ee,(b,j)=>{var H,v;return m(),z(te,null,[b.type==="page"?(m(),_(t(We),{key:j,"as-child":"",value:b.value,class:M(C.value.item({class:(H=a.ui)==null?void 0:H.item}))},{default:c(()=>[w(f.$slots,"item",q({ref_for:!0},{item:b,index:j,page:N,pageCount:V}),()=>{var o;return[i(L,{color:N===b.value?e.activeColor:e.color,variant:N===b.value?e.activeVariant:e.variant,size:e.size,label:String(b.value),ui:{label:C.value.label()},to:(o=e.to)==null?void 0:o.call(e,b.value),square:""},null,8,["color","variant","size","label","ui","to"])]})]),_:2},1032,["value","class"])):(m(),_(t(Oe),{key:b.type,index:j,"as-child":"",class:M(C.value.ellipsis({class:(v=a.ui)==null?void 0:v.ellipsis}))},{default:c(()=>[w(f.$slots,"ellipsis",{},()=>[i(L,{color:e.color,variant:e.variant,size:e.size,icon:e.ellipsisIcon||t(u).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:2},1032,["index","class"]))],64)}),256)),e.showControls||d.next?(m(),_(t(Xe),{key:2,"as-child":"",class:M(C.value.next({class:(Y=a.ui)==null?void 0:Y.next}))},{default:c(()=>[w(f.$slots,"next",{},()=>{var b;return[i(L,{color:e.color,variant:e.variant,size:e.size,icon:$.value,to:N<V?(b=e.to)==null?void 0:b.call(e,N+1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):T("",!0),e.showControls||d.last?(m(),_(t(je),{key:3,"as-child":"",class:M(C.value.last({class:(Z=a.ui)==null?void 0:Z.last}))},{default:c(()=>[w(f.$slots,"last",{},()=>{var b;return[i(L,{color:e.color,variant:e.variant,size:e.size,icon:P.value,to:(b=e.to)==null?void 0:b.call(e,V)},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):T("",!0)]}),_:2},1032,["class"])]}),_:3},16,["class"])}}},Ke={class:"admin-priest-panel"},et={class:"panel-header"},tt={class:"header-content"},at={class:"header-title"},st={class:"header-actions"},ot={class:"filters-section"},lt={class:"filters-row"},nt={class:"stats-grid"},it={class:"stat-card"},rt={class:"stat-icon pending"},dt={class:"stat-content"},ut={class:"stat-number"},ct={class:"stat-card"},vt={class:"stat-icon review"},mt={class:"stat-content"},ft={class:"stat-number"},pt={class:"stat-card"},gt={class:"stat-icon approved"},bt={class:"stat-content"},ht={class:"stat-number"},yt={class:"stat-card"},Pt={class:"stat-icon rejected"},Ct={class:"stat-content"},_t={class:"stat-number"},Rt={class:"table-section"},Et={class:"table-header"},wt={key:0,class:"pagination-info"},St={key:0,class:"loading-state"},It={key:1,class:"empty-state"},xt={key:2,class:"registrations-table"},Vt={class:"table-cell"},$t={class:"priest-info"},zt={class:"priest-name"},Nt={class:"priest-details"},kt={class:"table-cell"},Dt={class:"email-info"},qt={class:"table-cell"},Ut={class:"table-cell"},At={class:"table-cell"},Bt={class:"date-info"},Mt={class:"date-time"},Ot={class:"table-cell"},Lt={class:"actions-menu"},Tt={key:3,class:"pagination-section"},Ft={class:"modal-content"},jt={class:"modal-header"},Gt={class:"modal-body"},Jt={class:"priest-summary"},Qt={class:"modal-actions"},Wt=k({__name:"index",setup(e){Ve({title:"Painel Administrativo - Cadastro de Padres",description:"Gerencie e aprove cadastros de padres na plataforma AcessoCatólico."});const{getRegistrations:n,updateStatus:a,formatStatus:r,getStatusColor:d}=ye(),l=Me(),u=O(!1),R=O(!1),E=O(!1),h=O(1),$=O([]),P=O(null),C=O({pending:0,underReview:0,approved:0,rejected:0}),f=re({search:"",status:""}),p=re({isOpen:!1,registration:null,newStatus:"",comments:""}),J=[{label:"Todos os status",value:""},{label:"Pendente",value:"PENDING"},{label:"Em Análise",value:"UNDER_REVIEW"},{label:"Aprovado",value:"APPROVED"},{label:"Rejeitado",value:"REJECTED"},{label:"Requer Documentação",value:"REQUIRES_DOCUMENTATION"}],N=[{label:"Em Análise",value:"UNDER_REVIEW"},{label:"Aprovar",value:"APPROVED"},{label:"Rejeitar",value:"REJECTED"},{label:"Solicitar Documentação",value:"REQUIRES_DOCUMENTATION"}],V=async()=>{u.value=!0;try{const v={page:h.value,limit:10};f.status&&(v.status=f.status),f.search.trim()&&(v.search=f.search.trim());const o=await n(v);$.value=o.registrations,P.value=o.pagination,Q()}catch(v){l.add({title:"Erro ao carregar dados",description:v.message,color:"ui"})}finally{u.value=!1}},Q=async()=>{try{const[v,o,I,B]=await Promise.all([n({status:"PENDING",limit:1}),n({status:"UNDER_REVIEW",limit:1}),n({status:"APPROVED",limit:1}),n({status:"REJECTED",limit:1})]);C.value={pending:v.pagination.total,underReview:o.pagination.total,approved:I.pagination.total,rejected:B.pagination.total}}catch(v){console.error("Error updating stats:",v)}},ee=async()=>{R.value=!0;try{await V()}finally{R.value=!1}},W=useDebounceFn(()=>{h.value=1,V()},500),X=v=>{h.value=v,V()},Y=v=>{p.registration=v,p.newStatus="",p.comments="",p.isOpen=!0},Z=async()=>{if(!(!p.registration||!p.newStatus)){E.value=!0;try{await a(p.registration.id,p.newStatus,p.comments||void 0,"admin@acessocatolico.com"),l.add({title:"Status atualizado",description:"O status do cadastro foi atualizado com sucesso.",color:"primary"}),p.isOpen=!1,await V()}catch(v){l.add({title:"Erro ao atualizar",description:v.message,color:"ui"})}finally{E.value=!1}}},b=v=>[[{label:"Ver Detalhes",icon:"heroicons:eye",click:()=>{console.log("View details:",v.id)}}],[{label:"Atualizar Status",icon:"heroicons:pencil-square",click:()=>Y(v)}]],j=v=>new Date(v).toLocaleDateString("pt-BR"),H=v=>new Date(v).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return $e(()=>{V()}),ze(()=>f.status,()=>{h.value=1,V()}),(v,o)=>{const I=ge,B=L,ce=he,ae=Pe,se=_e,ve=de("UDropdown"),me=He,oe=de("UFormGroup"),fe=Ce,pe=Be;return m(),z("div",Ke,[s("div",et,[s("div",tt,[s("div",at,[i(I,{name:"heroicons:users",class:"header-icon"}),o[8]||(o[8]=s("div",null,[s("h1",null,"Gerenciamento de Padres"),s("p",null,"Visualize e gerencie os cadastros de padres pendentes")],-1))]),s("div",st,[i(B,{onClick:ee,loading:t(R),variant:"outline"},{default:c(()=>[i(I,{name:"heroicons:arrow-path"}),o[9]||(o[9]=x(" Atualizar "))]),_:1,__:[9]},8,["loading"])])])]),s("div",ot,[s("div",lt,[i(ce,{modelValue:t(f).search,"onUpdate:modelValue":o[0]||(o[0]=g=>t(f).search=g),placeholder:"Buscar por nome, email ou CPF...",icon:"heroicons:magnifying-glass",class:"search-input",onInput:t(W)},null,8,["modelValue","onInput"]),i(ae,{modelValue:t(f).status,"onUpdate:modelValue":[o[1]||(o[1]=g=>t(f).status=g),V],options:J,placeholder:"Todos os status",class:"status-filter"},null,8,["modelValue"])])]),s("div",nt,[s("div",it,[s("div",rt,[i(I,{name:"heroicons:clock"})]),s("div",dt,[s("div",ut,y(t(C).pending),1),o[10]||(o[10]=s("div",{class:"stat-label"},"Pendentes",-1))])]),s("div",ct,[s("div",vt,[i(I,{name:"heroicons:eye"})]),s("div",mt,[s("div",ft,y(t(C).underReview),1),o[11]||(o[11]=s("div",{class:"stat-label"},"Em Análise",-1))])]),s("div",pt,[s("div",gt,[i(I,{name:"heroicons:check-circle"})]),s("div",bt,[s("div",ht,y(t(C).approved),1),o[12]||(o[12]=s("div",{class:"stat-label"},"Aprovados",-1))])]),s("div",yt,[s("div",Pt,[i(I,{name:"heroicons:x-circle"})]),s("div",Ct,[s("div",_t,y(t(C).rejected),1),o[13]||(o[13]=s("div",{class:"stat-label"},"Rejeitados",-1))])])]),s("div",Rt,[s("div",Et,[o[14]||(o[14]=s("h2",null,"Cadastros Recentes",-1)),t(P)?(m(),z("div",wt," Mostrando "+y((t(P).page-1)*t(P).limit+1)+" a "+y(Math.min(t(P).page*t(P).limit,t(P).total))+" de "+y(t(P).total)+" registros ",1)):T("",!0)]),t(u)?(m(),z("div",St,[i(I,{name:"heroicons:arrow-path",class:"loading-icon"}),o[15]||(o[15]=s("p",null,"Carregando cadastros...",-1))])):t($).length===0?(m(),z("div",It,[i(I,{name:"heroicons:document-text",class:"empty-icon"}),o[16]||(o[16]=s("h3",null,"Nenhum cadastro encontrado",-1)),o[17]||(o[17]=s("p",null,"Não há cadastros que correspondam aos filtros selecionados.",-1))])):(m(),z("div",xt,[o[19]||(o[19]=Ne('<div class="table-header-row" data-v-8251081e><div class="table-cell" data-v-8251081e>Padre</div><div class="table-cell" data-v-8251081e>Email</div><div class="table-cell" data-v-8251081e>Diocese</div><div class="table-cell" data-v-8251081e>Status</div><div class="table-cell" data-v-8251081e>Data</div><div class="table-cell" data-v-8251081e>Ações</div></div>',1)),(m(!0),z(te,null,ue(t($),g=>(m(),z("div",{key:g.id,class:"table-row"},[s("div",Vt,[s("div",$t,[s("div",zt,y(g.firstName)+" "+y(g.lastName),1),s("div",Nt," CPF: "+y(g.cpf),1)])]),s("div",kt,[s("div",Dt,[x(y(g.email)+" ",1),g.emailVerified?(m(),_(se,{key:0,size:"xs",color:"primary"},{default:c(()=>o[18]||(o[18]=[x(" Verificado ")])),_:1,__:[18]})):T("",!0)])]),s("div",qt,y(g.ordinationDiocese.name),1),s("div",Ut,[i(se,{color:t(d)(g.status),variant:"soft"},{default:c(()=>[x(y(t(r)(g.status)),1)]),_:2},1032,["color"])]),s("div",At,[s("div",Bt,[s("div",null,y(j(g.createdAt)),1),s("div",Mt,y(H(g.createdAt)),1)])]),s("div",Ot,[s("div",Lt,[i(ve,{items:b(g)},{default:c(()=>[i(B,{variant:"ghost",size:"sm"},{default:c(()=>[i(I,{name:"heroicons:ellipsis-horizontal"})]),_:1})]),_:2},1032,["items"])])])]))),128))])),t(P)&&t(P).totalPages>1?(m(),z("div",Tt,[i(me,{modelValue:t(h),"onUpdate:modelValue":[o[2]||(o[2]=g=>ke(h)?h.value=g:null),X],"page-count":t(P).limit,total:t(P).total},null,8,["modelValue","page-count","total"])])):T("",!0)]),i(pe,{modelValue:t(p).isOpen,"onUpdate:modelValue":o[7]||(o[7]=g=>t(p).isOpen=g),ui:{width:"sm:max-w-md"}},{default:c(()=>{var g,le,ne;return[s("div",Ft,[s("div",jt,[o[20]||(o[20]=s("h3",null,"Atualizar Status",-1)),i(B,{onClick:o[3]||(o[3]=G=>t(p).isOpen=!1),variant:"ghost",size:"sm"},{default:c(()=>[i(I,{name:"heroicons:x-mark"})]),_:1})]),s("div",Gt,[s("div",Jt,[s("h4",null,y((g=t(p).registration)==null?void 0:g.firstName)+" "+y((le=t(p).registration)==null?void 0:le.lastName),1),s("p",null,y((ne=t(p).registration)==null?void 0:ne.email),1)]),i(oe,{label:"Novo Status",required:""},{default:c(()=>[i(ae,{modelValue:t(p).newStatus,"onUpdate:modelValue":o[4]||(o[4]=G=>t(p).newStatus=G),options:N,placeholder:"Selecione o status"},null,8,["modelValue"])]),_:1}),i(oe,{label:"Comentários"},{default:c(()=>[i(fe,{modelValue:t(p).comments,"onUpdate:modelValue":o[5]||(o[5]=G=>t(p).comments=G),placeholder:"Comentários sobre a decisão (opcional)",rows:3},null,8,["modelValue"])]),_:1})]),s("div",Qt,[i(B,{onClick:o[6]||(o[6]=G=>t(p).isOpen=!1),variant:"outline",disabled:t(E)},{default:c(()=>o[21]||(o[21]=[x(" Cancelar ")])),_:1,__:[21]},8,["disabled"]),i(B,{onClick:Z,loading:t(E),disabled:!t(p).newStatus},{default:c(()=>o[22]||(o[22]=[x(" Atualizar Status ")])),_:1,__:[22]},8,["loading","disabled"])])])]}),_:1},8,["modelValue"])])}}}),da=De(Wt,[["__scopeId","data-v-8251081e"]]);export{da as default};

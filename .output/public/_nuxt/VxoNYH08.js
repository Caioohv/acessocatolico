import{h as l,J as i}from"./DwCNKQGy.js";const D=()=>{const a=l(!1),o=l(null),d=async e=>{var s;a.value=!0,o.value=null;try{const t=await $fetch("/api/priests/register",{method:"POST",body:e});return{success:t.success,registrationId:t.registrationId,message:t.message}}catch(t){const r=((s=t.data)==null?void 0:s.message)||t.message||"Erro ao submeter cadastro";throw o.value=r,new Error(r)}finally{a.value=!1}},E=async(e,s,t)=>{var r;a.value=!0,o.value=null;try{const c=new FormData;c.append("registrationId",e),c.append("documentType",s),c.append("file",t);const n=await $fetch("/api/priests/upload-document",{method:"POST",body:c});return{success:n.success,document:n.document,message:n.message}}catch(c){const n=((r=c.data)==null?void 0:r.message)||c.message||"Erro ao enviar documento";throw o.value=n,new Error(n)}finally{a.value=!1}},g=async e=>{var s;a.value=!0,o.value=null;try{const t=new URLSearchParams;return e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),(await $fetch(`/api/priests?${t.toString()}`)).data}catch(t){const r=((s=t.data)==null?void 0:s.message)||t.message||"Erro ao buscar cadastros";throw o.value=r,new Error(r)}finally{a.value=!1}},f=async(e,s,t,r)=>{var c;a.value=!0,o.value=null;try{const n=await $fetch("/api/priests/update-status",{method:"PUT",body:{registrationId:e,status:s,comments:t,adminEmail:r}});return{success:n.success,message:n.message}}catch(n){const u=((c=n.data)==null?void 0:c.message)||n.message||"Erro ao atualizar status";throw o.value=u,new Error(u)}finally{a.value=!1}},y=async()=>{var e;a.value=!0,o.value=null;try{return(await $fetch("/api/priests/stats")).data}catch(s){const t=((e=s.data)==null?void 0:e.message)||s.message||"Erro ao buscar estatísticas";throw o.value=t,new Error(t)}finally{a.value=!1}},h=async e=>{var s;a.value=!0,o.value=null;try{return(await $fetch(`/api/priests/history?registrationId=${e}`)).data}catch(t){const r=((s=t.data)==null?void 0:s.message)||t.message||"Erro ao buscar histórico";throw o.value=r,new Error(r)}finally{a.value=!1}},p=e=>({ORDINATION_CERTIFICATE:"Certidão de Ordenação",IDENTITY_DOCUMENT:"Documento de Identidade",RESIDENCE_PROOF:"Comprovante de Residência",RECOMMENDATION_LETTER:"Carta de Recomendação",OTHER:"Outro"})[e]||e,v=e=>({PENDING:"Pendente",UNDER_REVIEW:"Em Análise",APPROVED:"Aprovado",REJECTED:"Rejeitado",REQUIRES_DOCUMENTATION:"Requer Documentação"})[e]||e,R=e=>({PENDING:"amber",UNDER_REVIEW:"blue",APPROVED:"green",REJECTED:"red",REQUIRES_DOCUMENTATION:"orange"})[e]||"gray";return{loading:i(a),error:i(o),submitRegistration:d,uploadDocument:E,getRegistrations:g,updateStatus:f,getStats:y,getApprovalHistory:h,formatDocumentType:p,formatStatus:v,getStatusColor:R}};export{D as u};
